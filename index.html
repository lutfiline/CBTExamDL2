<!doctype html>
<html lang="id" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TUC 2 TKA Kombel Kawula - CBT Online</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&amp;display=swap" rel="stylesheet">
  <style>
    body {
      box-sizing: border-box;
      font-family: 'Plus Jakarta Sans', sans-serif;
    }
    
    .login-card {
      box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
    }
    
    .question-card {
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
    }
    
    .nav-btn {
      transition: all 0.2s ease;
    }
    
    .nav-btn:hover {
      transform: translateY(-2px);
    }
    
    .question-num {
      transition: all 0.2s ease;
    }
    
    .question-num:hover {
      transform: scale(1.1);
    }
    
    .drag-item {
      cursor: grab;
      transition: all 0.2s ease;
    }
    
    .drag-item:active {
      cursor: grabbing;
    }
    
    .drag-item.dragging {
      opacity: 0.5;
      transform: scale(1.05);
    }
    
    .drop-zone {
      transition: all 0.2s ease;
      min-height: 44px;
    }
    
    .drop-zone.drag-over {
      background-color: #dbeafe;
      border-color: #3b82f6;
      transform: scale(1.02);
    }
    
    .matched-item {
      background: linear-gradient(135deg, #10b981 0%, #059669 100%);
      color: white;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .fade-in {
      animation: fadeIn 0.3s ease;
    }
    
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }
    
    .timer-warning {
      animation: pulse 1s infinite;
    }
    
    .progress-bar {
      transition: width 0.3s ease;
    }
    
    /* Custom scrollbar */
    ::-webkit-scrollbar {
      width: 8px;
    }
    
    ::-webkit-scrollbar-track {
      background: #f1f5f9;
      border-radius: 4px;
    }
    
    ::-webkit-scrollbar-thumb {
      background: #94a3b8;
      border-radius: 4px;
    }
    
    ::-webkit-scrollbar-thumb:hover {
      background: #64748b;
    }
    
    .loading-overlay {
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(4px);
    }
    
    .selected-drag-item {
      outline: 3px solid #3b82f6;
      outline-offset: 2px;
      background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%) !important;
    }
    
    /* Prevent text selection on mobile drag */
    .drag-item, .drop-zone {
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
      -webkit-touch-callout: none;
    }
    
    /* Make touch targets larger on mobile */
    @media (max-width: 768px) {
      .drag-item {
        min-height: 48px;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      
      .drop-zone {
        min-height: 48px;
      }
    }
    
    .logo-container {
      transition: all 0.3s ease;
    }
    
    .logo-container:hover {
      transform: scale(1.05);
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full bg-gradient-to-br from-blue-50 via-white to-indigo-50">
  <div id="app" class="h-full overflow-auto"><!-- Login Page -->
   <div id="loginPage" class="min-h-full flex flex-col"><!-- Header with Both Large Logos -->
    <header class="bg-gradient-to-r from-blue-700 via-blue-600 to-indigo-600 text-white py-8 px-4 md:px-6 shadow-2xl">
     <div class="max-w-7xl mx-auto flex items-center justify-between gap-4 md:gap-8"><!-- Left Logo - Purworejo -->
      <div class="logo-container flex-shrink-0">
       <div class="w-24 h-24 md:w-32 md:h-32 bg-white rounded-3xl p-2 md:p-3 shadow-2xl flex items-center justify-center border-4 border-yellow-300 overflow-hidden"><img src="https://i.ibb.co.com/9SKjynS/purworejo.png" alt="Logo Purworejo" class="w-full h-full object-cover" loading="lazy" onerror="console.error('Image failed to load:', this.src); this.style.background='#e5e7eb'; this.alt='Logo unavailable';">
       </div>
      </div><!-- Center Text -->
      <div class="flex-1 text-center px-2">
  <p class="text-yellow-200 text-2xl md:text-4xl font-black tracking-tight mb-1 md:mb-2 uppercase">WILCAMBIDIK KECAMATAN KALIGESING</p>
  <h1 id="headerTitle" class="text-2xl md:text-4xl font-black tracking-tight mb-1 md:mb-2">TUC 1 TKA Kombel Kawula</h1>
  <p class="text-blue-100 text-sm md:text-lg font-semibold">Computer Based Test - Ujian Online</p>
      </div><!-- Right Logo - Kawula -->
      <div class="logo-container flex-shrink-0">
       <div class="w-24 h-24 md:w-32 md:h-32 bg-white rounded-3xl p-2 md:p-3 shadow-2xl flex items-center justify-center border-4 border-emerald-300 overflow-hidden"><img src="https://i.ibb.co.com/wNz5ckr1/kombel-kawula-betul.jpg" alt="Logo Kawula" class="w-full h-full object-cover" loading="lazy" onerror="console.error('Image failed to load:', this.src); this.style.background='#e5e7eb'; this.alt='Logo unavailable';">
       </div>
      </div>
     </div>
    </header><!-- Login Form -->
    <main class="flex-1 flex items-center justify-center p-6">
     <div class="login-card bg-white rounded-3xl p-10 w-full max-w-md">
      <div class="text-center mb-8">
       <div class="w-20 h-20 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl mx-auto mb-4 flex items-center justify-center shadow-lg">
        <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
        </svg>
       </div>
       <h2 class="text-2xl font-bold text-gray-800">Login Peserta</h2>
       <p class="text-gray-500 mt-2">Masukkan kredensial Anda untuk memulai ujian</p>
      </div>
      <form id="loginForm" class="space-y-5">
       <div><label for="username" class="block text-sm font-semibold text-gray-700 mb-2">Username</label>
        <div class="relative"><span class="absolute left-4 top-1/2 -translate-y-1/2 text-gray-400">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
          </svg></span> <input type="text" id="username" class="w-full pl-12 pr-4 py-3.5 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all outline-none" placeholder="Masukkan username" required>
        </div>
       </div>
       <div><label for="password" class="block text-sm font-semibold text-gray-700 mb-2">Password</label>
        <div class="relative"><span class="absolute left-4 top-1/2 -translate-y-1/2 text-gray-400">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path>
          </svg></span> <input type="password" id="password" class="w-full pl-12 pr-4 py-3.5 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all outline-none" placeholder="Masukkan password" required>
        </div>
       </div>
       <div id="loginError" class="hidden bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl text-sm">
        <div class="flex items-center gap-2">
         <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
         </svg><span>Username atau password salah!</span>
        </div>
       </div><button type="submit" id="loginBtn" class="w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-4 rounded-xl font-semibold text-lg hover:from-blue-700 hover:to-indigo-700 transition-all shadow-lg hover:shadow-xl nav-btn"> <span id="loginBtnText">Masuk</span> <span id="loginBtnLoading" class="hidden">
         <svg class="animate-spin h-5 w-5 mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle> <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
         </svg></span> </button>
      </form>
      <div class="mt-6 text-center"><button id="adminLoginBtn" class="text-blue-600 hover:text-blue-800 text-sm font-medium hover:underline"> Login sebagai Admin → </button>
      </div>
     </div>
    </main>
   </div><!-- Admin Login Page -->
   <div id="adminLoginPage" class="min-h-full hidden flex-col">
    <header class="bg-gradient-to-r from-gray-800 via-gray-700 to-gray-800 text-white py-6 px-6 shadow-xl">
     <div class="max-w-7xl mx-auto flex items-center gap-6">
      <div class="w-20 h-20 bg-white rounded-2xl p-3 shadow-lg flex items-center justify-center border-4 border-gray-300"><span class="text-5xl leading-none">⚙️</span>
      </div>
      <div>
       <h1 class="text-3xl font-bold tracking-tight">Admin Panel</h1>
       <p class="text-gray-300 text-sm font-medium">TUC 1 TKA Kombel Kawula</p>
      </div>
     </div>
    </header>
    <main class="flex-1 flex items-center justify-center p-6">
     <div class="login-card bg-white rounded-3xl p-10 w-full max-w-md">
      <div class="text-center mb-8">
       <div class="w-20 h-20 bg-gradient-to-br from-gray-700 to-gray-900 rounded-2xl mx-auto mb-4 flex items-center justify-center shadow-lg">
        <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
        </svg>
       </div>
       <h2 class="text-2xl font-bold text-gray-800">Login Administrator</h2>
       <p class="text-gray-500 mt-2">Akses panel admin untuk mengelola ujian</p>
      </div>
      <form id="adminLoginForm" class="space-y-5">
       <div><label for="adminUsername" class="block text-sm font-semibold text-gray-700 mb-2">Username Admin</label> <input type="text" id="adminUsername" class="w-full px-4 py-3.5 border-2 border-gray-200 rounded-xl focus:border-gray-500 focus:ring-4 focus:ring-gray-100 transition-all outline-none" placeholder="admin" required>
       </div>
       <div><label for="adminPassword" class="block text-sm font-semibold text-gray-700 mb-2">Password Admin</label> <input type="password" id="adminPassword" class="w-full px-4 py-3.5 border-2 border-gray-200 rounded-xl focus:border-gray-500 focus:ring-4 focus:ring-gray-100 transition-all outline-none" placeholder="•••••••" required>
       </div>
       <div id="adminLoginError" class="hidden bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl text-sm">
        Username atau password admin salah!
       </div><button type="submit" class="w-full bg-gradient-to-r from-gray-700 to-gray-900 text-white py-4 rounded-xl font-semibold text-lg hover:from-gray-800 hover:to-black transition-all shadow-lg"> Masuk ke Admin Panel </button>
      </form>
      <div class="mt-6 text-center"><button id="backToStudentLogin" class="text-gray-600 hover:text-gray-800 text-sm font-medium hover:underline"> ← Kembali ke Login Siswa </button>
      </div>
     </div>
    </main>
   </div><!-- Exam Page -->
   <div id="examPage" class="h-full hidden flex-col"><!-- Exam Header -->
    <header class="bg-gradient-to-r from-blue-700 via-blue-600 to-indigo-600 text-white py-3 px-4 shadow-lg">
     <div class="flex items-center justify-between gap-3 flex-wrap md:flex-nowrap">
      <div class="flex items-center gap-2 md:gap-3">
       <div class="w-10 h-10 md:w-12 md:h-12 bg-white rounded-lg p-1 md:p-1.5 shadow flex items-center justify-center flex-shrink-0"><span class="text-2xl md:text-3xl leading-none">  </span>
       </div>
       <div class="hidden sm:block">
        <h1 id="examTitle" class="text-lg md:text-xl font-bold">TUC 1 TKA Kombel Kawula</h1>
        <p class="text-blue-100 text-xs md:text-sm">Ujian Online</p>
       </div>
      </div><!-- Timer -->
      <div class="flex items-center gap-2 md:gap-4">
       <div id="timerDisplay" class="bg-white/20 backdrop-blur px-2 md:px-4 py-2 rounded-xl flex items-center gap-1 md:gap-2">
        <svg class="w-4 h-4 md:w-5 md:h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
        </svg><span id="timer" class="font-bold text-sm md:text-lg font-mono">00:00</span>
       </div><!-- User Info - Hidden on Mobile -->
       <div class="hidden md:flex items-center gap-2 bg-white/10 rounded-xl px-3 py-1.5"><img id="userPhoto" src="" alt="Foto" class="w-8 h-8 rounded-full object-cover border-2 border-white" loading="lazy" onerror="this.src='data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 24 24%22 fill=%22%23fff%22><circle cx=%2212%22 cy=%228%22 r=%224%22/><path d=%22M12 14c-4 0-7 2-7 5v1h14v-1c0-3-3-5-7-5z%22/></svg>'">
        <div class="text-sm">
         <p id="userName" class="font-semibold">Nama Siswa</p>
         <p id="userClass" class="text-blue-200 text-xs">Kelas</p>
        </div>
       </div><button id="logoutBtn" class="bg-red-500 hover:bg-red-600 px-2 md:px-4 py-1.5 md:py-2 rounded-xl text-xs md:text-sm font-semibold transition-all flex items-center gap-1 md:gap-2">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path>
        </svg><span class="hidden sm:inline">Keluar</span> </button>
      </div>
     </div><!-- Progress Bar -->
     <div class="mt-3">
      <div class="flex justify-between text-xs text-blue-100 mb-1"><span>Progress Pengerjaan</span> <span id="progressText">0/0 soal dijawab</span>
      </div>
      <div class="h-2 bg-white/20 rounded-full overflow-hidden">
       <div id="progressBar" class="progress-bar h-full bg-gradient-to-r from-green-400 to-emerald-500 rounded-full" style="width: 0%"></div>
      </div>
     </div>
    </header><!-- Main Exam Content -->
    <div class="flex-1 flex flex-col md:flex-row overflow-hidden"><!-- Question Panel -->
     <div class="flex-1 flex flex-col overflow-hidden">
      <div class="flex-1 overflow-y-auto p-4 md:p-6">
       <div id="questionContainer" class="question-card bg-white rounded-2xl p-4 md:p-6 fade-in">
        <div class="text-center py-12">
         <div class="text-6xl mb-4">
              
         </div>
         <p class="text-gray-500 text-lg">Soal akan segera tersedia. Tunggu pembaruan dari admin...</p>
        </div>
       </div>
      </div><!-- Navigation Buttons -->
      <div class="bg-white border-t border-gray-200 px-3 py-3 md:px-6 md:py-4">
       <div class="flex items-center justify-between gap-2"><button id="prevBtn" class="nav-btn bg-gradient-to-r from-red-500 to-red-600 text-white px-3 py-2 md:px-6 md:py-3 rounded-xl font-semibold flex items-center gap-1 md:gap-2 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed text-sm md:text-base">
         <svg class="w-4 h-4 md:w-5 md:h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
         </svg><span class="hidden sm:inline">Sebelumnya</span> <span class="sm:hidden">Prev</span> </button> <button id="doubtBtn" class="nav-btn bg-gradient-to-r from-yellow-400 to-amber-500 text-white px-3 py-2 md:px-6 md:py-3 rounded-xl font-semibold flex items-center gap-1 md:gap-2 shadow-lg text-sm md:text-base">
         <svg class="w-4 h-4 md:w-5 md:h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
         </svg><span id="doubtBtnText" class="hidden sm:inline">Ragu-ragu</span> <span class="sm:hidden">Ragu</span> </button> <button id="toggleNavBtn" class="md:hidden nav-btn bg-gradient-to-r from-purple-500 to-purple-600 text-white px-3 py-2 rounded-xl font-semibold flex items-center gap-1 shadow-lg text-sm">
         <svg class="w-4 h-4" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
         </svg><span id="navBtnText">Nav</span> </button> <button id="nextBtn" class="nav-btn bg-gradient-to-r from-blue-500 to-blue-600 text-white px-3 py-2 md:px-6 md:py-3 rounded-xl font-semibold flex items-center gap-1 md:gap-2 shadow-lg text-sm md:text-base"> <span class="hidden sm:inline">Berikutnya</span> <span class="sm:hidden">Next</span>
         <svg class="w-4 h-4 md:w-5 md:h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
         </svg></button>
       </div>
      </div>
     </div><!-- Question Navigation Sidebar (Desktop) / Bottom Sheet (Mobile) -->
     <div id="questionNavPanel" class="hidden md:flex md:w-72 bg-gray-50 border-l border-gray-200 flex-col">
      <div class="p-4 border-b border-gray-200">
       <h3 class="font-bold text-gray-700">Navigasi Soal</h3>
      </div>
      <div class="flex-1 overflow-y-auto p-4">
       <div id="questionNav" class="grid grid-cols-5 gap-2"><!-- Question numbers will be injected here -->
       </div>
      </div>
      <div class="p-4 border-t border-gray-200"><button id="submitExamBtn" class="w-full bg-gradient-to-r from-green-500 to-emerald-600 text-white py-3 rounded-xl font-bold shadow-lg hover:from-green-600 hover:to-emerald-700 transition-all nav-btn"> Selesai &amp; Kumpulkan </button>
      </div>
     </div>
    </div>
   </div><!-- Result Page -->
   <div id="resultPage" class="min-h-full hidden flex-col">
    <header class="bg-gradient-to-r from-green-600 via-emerald-600 to-teal-600 text-white py-6 px-6 shadow-xl">
     <div class="max-w-7xl mx-auto flex items-center gap-4">
      <div class="w-16 h-16 bg-white rounded-2xl p-3 shadow-lg flex items-center justify-center border-4 border-yellow-300"><span class="text-5xl">    </span>
      </div>
      <div>
       <h1 class="text-2xl md:text-3xl font-bold tracking-tight">Ujian Selesai!</h1>
       <p class="text-green-100 text-sm font-medium">TUC 1 TKA Kombel Kawula</p>
      </div>
     </div>
    </header>
    <main class="flex-1 flex items-center justify-center p-6">
     <div class="login-card bg-white rounded-3xl p-10 w-full max-w-lg text-center">
      <div class="w-24 h-24 bg-gradient-to-br from-green-400 to-emerald-600 rounded-full mx-auto mb-6 flex items-center justify-center shadow-xl">
       <svg class="w-12 h-12 text-white" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
       </svg>
      </div>
      <h2 class="text-3xl font-bold text-gray-800 mb-2">Terima Kasih!</h2>
      <p class="text-gray-500 mb-8">Jawaban Anda telah berhasil disimpan</p>
      <div class="bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl p-6 mb-8">
       <p class="text-gray-600 mb-2">Skor Anda</p>
       <p id="finalScore" class="text-5xl font-bold text-blue-600 mb-2">0</p>
       <p id="scoreDetail" class="text-gray-500 text-sm">0 dari 0 soal benar</p>
      </div>
      <div class="space-y-3 text-left bg-gray-50 rounded-xl p-4 mb-6">
       <div class="flex justify-between"><span class="text-gray-600">Nama:</span> <span id="resultName" class="font-semibold text-gray-800">-</span>
       </div>
       <div class="flex justify-between"><span class="text-gray-600">Kelas:</span> <span id="resultClass" class="font-semibold text-gray-800">-</span>
       </div>
       <div class="flex justify-between"><span class="text-gray-600">Waktu Selesai:</span> <span id="resultTime" class="font-semibold text-gray-800">-</span>
       </div>
      </div><button id="backToLoginBtn" class="w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-4 rounded-xl font-semibold text-lg hover:from-blue-700 hover:to-indigo-700 transition-all shadow-lg nav-btn"> Kembali ke Halaman Login </button>
     </div>
    </main>
   </div><!-- Admin Panel -->
   <div id="adminPanel" class="h-full hidden flex-col"><!-- Admin Header -->
    <header class="bg-gradient-to-r from-gray-800 via-gray-700 to-gray-800 text-white py-3 px-6 shadow-lg">
     <div class="flex items-center justify-between gap-4 flex-wrap md:flex-nowrap">
      <div class="flex items-center gap-3"><span class="text-3xl md:text-4xl">⚙️</span>
       <div>
        <h1 class="text-lg md:text-xl font-bold">Admin Panel</h1>
        <p class="text-gray-400 text-xs md:text-sm">TUC 1 TKA Kombel Kawula</p>
       </div>
      </div>
      <div class="flex items-center gap-2 md:gap-3"><button id="refreshDataBtn" class="bg-blue-600 hover:bg-blue-700 px-2 md:px-4 py-1.5 md:py-2 rounded-xl text-xs md:text-sm font-semibold transition-all flex items-center gap-1 md:gap-2">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
        </svg><span class="hidden sm:inline">Refresh Data</span> <span class="sm:hidden">Refresh</span> </button> <button id="adminLogoutBtn" class="bg-red-500 hover:bg-red-600 px-2 md:px-4 py-1.5 md:py-2 rounded-xl text-xs md:text-sm font-semibold transition-all flex items-center gap-1 md:gap-2">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path>
        </svg><span class="hidden sm:inline">Logout</span> </button>
      </div>
     </div>
    </header>
    <div class="flex-1 flex overflow-hidden"><!-- Sidebar -->
     <nav class="w-48 md:w-64 bg-gray-900 text-white p-3 md:p-4 overflow-y-auto">
      <ul class="space-y-2">
       <li><button class="admin-nav-btn active w-full text-left px-4 py-3 rounded-xl flex items-center gap-3 transition-all hover:bg-gray-700 text-sm md:text-base" data-tab="users">
         <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"></path>
         </svg><span class="hidden md:inline">Data Pengguna</span> <span class="md:hidden">Pengguna</span> </button></li>
       <li><button class="admin-nav-btn w-full text-left px-4 py-3 rounded-xl flex items-center gap-3 transition-all hover:bg-gray-700 text-sm md:text-base" data-tab="results">
         <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
         </svg><span class="hidden md:inline">Hasil Ujian</span> <span class="md:hidden">Hasil</span> </button></li>
       <li><button class="admin-nav-btn w-full text-left px-4 py-3 rounded-xl flex items-center gap-3 transition-all hover:bg-gray-700 text-sm md:text-base" data-tab="settings">
         <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
         </svg><span class="hidden md:inline">Pengaturan</span> <span class="md:hidden">Seting</span> </button></li>
      </ul>
     </nav><!-- Admin Content -->
     <div class="flex-1 overflow-y-auto p-4 md:p-6 bg-gray-100"><!-- Users Tab -->
      <div id="usersTab" class="admin-tab">
       <div class="flex items-center justify-between gap-4 mb-6 flex-wrap">
        <h2 class="text-xl md:text-2xl font-bold text-gray-800">Data Pengguna</h2><button id="addUserBtn" class="bg-blue-600 hover:bg-blue-700 text-white px-3 md:px-4 py-2 md:py-2 rounded-xl font-semibold flex items-center gap-2 transition-all text-sm md:text-base">
         <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
         </svg><span class="hidden sm:inline">Tambah Pengguna</span> <span class="sm:hidden">Tambah</span> </button>
       </div>
       <div class="bg-white rounded-2xl shadow-lg overflow-hidden overflow-x-auto">
        <table class="w-full">
         <thead class="bg-gray-50">
          <tr>
           <th class="px-4 md:px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider">Foto</th>
           <th class="px-4 md:px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider">Username</th>
           <th class="px-4 md:px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider">Nama</th>
           <th class="px-4 md:px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider">Kelas</th>
           <th class="px-4 md:px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider">Role</th>
           <th class="px-4 md:px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider">Aksi</th>
          </tr>
         </thead>
         <tbody id="usersTableBody" class="divide-y divide-gray-200"><!-- Users will be loaded here -->
         </tbody>
        </table>
        <div id="noUsersMessage" class="hidden p-8 text-center text-gray-500">
         <svg class="w-16 h-16 mx-auto mb-4 text-gray-300" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"></path>
         </svg>
         <p class="text-lg font-medium">Belum ada data pengguna</p>
         <p class="text-sm">Klik "Tambah Pengguna" untuk menambahkan</p>
        </div>
       </div>
      </div><!-- Results Tab -->
      <div id="resultsTab" class="admin-tab hidden">
       <div class="flex items-center justify-between gap-4 mb-6 flex-wrap">
        <h2 class="text-xl md:text-2xl font-bold text-gray-800">Hasil Ujian</h2><button id="exportResultsBtn" class="bg-green-600 hover:bg-green-700 text-white px-3 md:px-4 py-2 md:py-2 rounded-xl font-semibold flex items-center gap-2 transition-all text-sm md:text-base">
         <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path>
         </svg><span class="hidden sm:inline">Export Data</span> <span class="sm:hidden">Export</span> </button>
       </div>
       <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
        <div class="bg-white rounded-xl p-4 shadow">
         <p class="text-gray-500 text-sm">Total Peserta</p>
         <p id="totalParticipants" class="text-2xl font-bold text-gray-800">0</p>
        </div>
        <div class="bg-white rounded-xl p-4 shadow">
         <p class="text-gray-500 text-sm">Sudah Mengerjakan</p>
         <p id="completedCount" class="text-2xl font-bold text-green-600">0</p>
        </div>
        <div class="bg-white rounded-xl p-4 shadow">
         <p class="text-gray-500 text-sm">Rata-rata Skor</p>
         <p id="averageScore" class="text-2xl font-bold text-blue-600">0</p>
        </div>
        <div class="bg-white rounded-xl p-4 shadow">
         <p class="text-gray-500 text-sm">Skor Tertinggi</p>
         <p id="highestScore" class="text-2xl font-bold text-purple-600">0</p>
        </div>
       </div>
       <div class="bg-white rounded-2xl shadow-lg overflow-hidden overflow-x-auto">
        <table class="w-full">
         <thead class="bg-gray-50">
          <tr>
           <th class="px-4 md:px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase">No</th>
           <th class="px-4 md:px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase">Nama</th>
           <th class="px-4 md:px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase">Kelas</th>
           <th class="px-4 md:px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase">Skor</th>
           <th class="px-4 md:px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase">Benar</th>
           <th class="px-4 md:px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase">Waktu Selesai</th>
          </tr>
         </thead>
         <tbody id="resultsTableBody" class="divide-y divide-gray-200"><!-- Results will be loaded here -->
         </tbody>
        </table>
        <div id="noResultsMessage" class="hidden p-8 text-center text-gray-500">
         <svg class="w-16 h-16 mx-auto mb-4 text-gray-300" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
         </svg>
         <p class="text-lg font-medium">Belum ada hasil ujian</p>
         <p class="text-sm">Hasil akan muncul setelah peserta menyelesaikan ujian</p>
        </div>
       </div>
      </div><!-- Settings Tab -->
      <div id="settingsTab" class="admin-tab hidden">
       <h2 class="text-xl md:text-2xl font-bold text-gray-800 mb-6">Pengaturan Ujian</h2>
       <div class="bg-white rounded-2xl shadow-lg p-6 mb-6">
        <h3 class="text-lg font-bold text-gray-800 mb-4">Import Soal dari File Word</h3>
        <div class="bg-yellow-50 border border-yellow-200 rounded-xl p-4 mb-4">
         <div class="flex gap-3">
          <svg class="w-6 h-6 text-yellow-600 flex-shrink-0" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
          </svg>
          <div class="text-sm text-yellow-800">
           <p class="font-semibold mb-2">Format File Word (.docx):</p>
           <p class="mb-1">• Saat ini fitur import soal dari Word masih dalam pengembangan</p>
           <p class="mb-1">• Sementara, soal dapat ditambahkan langsung melalui kode aplikasi</p>
           <p>• Fitur import akan segera tersedia untuk memudahkan input soal</p>
          </div>
         </div>
        </div>
        <div class="border-2 border-dashed border-gray-300 rounded-xl p-8 text-center bg-gray-50">
         <svg class="w-16 h-16 mx-auto mb-4 text-gray-400" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
         </svg>
         <p class="text-gray-600 mb-2">Fitur Import Soal (Segera Hadir)</p>
         <p class="text-sm text-gray-500 mb-4">Upload file Word (.docx) dengan format soal yang telah ditentukan</p><button class="bg-gray-300 text-gray-500 px-6 py-3 rounded-xl font-semibold cursor-not-allowed" disabled> Pilih File Word </button>
         <p class="text-xs text-gray-400 mt-2">Fitur ini akan segera aktif</p>
        </div>
       </div>
       <div class="bg-white rounded-2xl shadow-lg p-6">
        <h3 class="text-lg font-bold text-gray-800 mb-4">Pengaturan Umum</h3>
        <form id="settingsForm" class="space-y-6">
         <div><label for="settingTitle" class="block text-sm font-semibold text-gray-700 mb-2">Judul Ujian</label> <input type="text" id="settingTitle" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all outline-none" value="TUC 1 TKA Kombel Kawula">
         </div>
         <div><label for="settingDuration" class="block text-sm font-semibold text-gray-700 mb-2">Durasi Ujian (menit)</label> <input type="number" id="settingDuration" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all outline-none" value="75" min="1" max="300">
         </div>
         <div><label for="settingQuestions" class="block text-sm font-semibold text-gray-700 mb-2">Jumlah Soal</label> <input type="number" id="settingQuestions" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all outline-none" value="0" min="0" readonly>
          <p class="text-xs text-gray-500 mt-1">Jumlah soal akan diperbarui otomatis sesuai jumlah soal yang ada</p>
         </div>
         <div class="flex items-center gap-3"><input type="checkbox" id="settingRandomize" class="w-5 h-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500" checked> <label for="settingRandomize" class="text-sm font-medium text-gray-700">Acak urutan soal untuk setiap siswa</label>
         </div><button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-xl font-semibold transition-all"> Simpan Pengaturan </button>
        </form>
       </div>
      </div>
     </div>
    </div>
   </div><!-- Add/Edit User Modal -->
   <div id="userModal" class="fixed inset-0 bg-black/50 backdrop-blur-sm hidden items-center justify-center z-50">
    <div class="bg-white rounded-2xl p-8 w-full max-w-md mx-4 shadow-2xl">
     <h3 id="userModalTitle" class="text-xl font-bold text-gray-800 mb-6">Tambah Pengguna</h3>
     <form id="userForm" class="space-y-4"><input type="hidden" id="editUserId">
      <div><label for="userUsername" class="block text-sm font-semibold text-gray-700 mb-2">Username</label> <input type="text" id="userUsername" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 outline-none" required>
      </div>
      <div><label for="userPassword" class="block text-sm font-semibold text-gray-700 mb-2">Password</label> <input type="text" id="userPassword" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 outline-none" required>
      </div>
      <div><label for="userFullname" class="block text-sm font-semibold text-gray-700 mb-2">Nama Lengkap</label> <input type="text" id="userFullname" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 outline-none" required>
      </div>
      <div><label for="userKelas" class="block text-sm font-semibold text-gray-700 mb-2">Kelas</label> <input type="text" id="userKelas" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 outline-none" required>
      </div>
      <div><label for="userPhoto" class="block text-sm font-semibold text-gray-700 mb-2">URL Foto (opsional)</label> <input type="text" id="userPhoto" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 outline-none" placeholder="https://...">
      </div>
      <div class="flex gap-3 mt-6"><button type="button" id="cancelUserBtn" class="flex-1 bg-gray-200 hover:bg-gray-300 text-gray-700 py-3 rounded-xl font-semibold transition-all"> Batal </button> <button type="submit" class="flex-1 bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-xl font-semibold transition-all"> Simpan </button>
      </div>
     </form>
    </div>
   </div><!-- Confirm Submit Modal -->
   <div id="confirmSubmitModal" class="fixed inset-0 bg-black/50 backdrop-blur-sm hidden items-center justify-center z-50">
    <div class="bg-white rounded-2xl p-8 w-full max-w-md mx-4 shadow-2xl text-center">
     <div class="w-16 h-16 bg-yellow-100 rounded-full mx-auto mb-4 flex items-center justify-center">
      <svg class="w-8 h-8 text-yellow-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path>
      </svg>
     </div>
     <h3 class="text-xl font-bold text-gray-800 mb-2">Kumpulkan Jawaban?</h3>
     <p id="confirmSubmitText" class="text-gray-600 mb-6">Anda telah menjawab 0 dari 0 soal. Yakin ingin mengumpulkan?</p>
     <div class="flex gap-3"><button id="cancelSubmitBtn" class="flex-1 bg-gray-200 hover:bg-gray-300 text-gray-700 py-3 rounded-xl font-semibold transition-all"> Kembali </button> <button id="confirmSubmitBtn" class="flex-1 bg-green-600 hover:bg-green-700 text-white py-3 rounded-xl font-semibold transition-all"> Ya, Kumpulkan </button>
     </div>
    </div>
   </div><!-- Delete Confirm Modal -->
   <div id="deleteConfirmModal" class="fixed inset-0 bg-black/50 backdrop-blur-sm hidden items-center justify-center z-50">
    <div class="bg-white rounded-2xl p-8 w-full max-w-md mx-4 shadow-2xl text-center">
     <div class="w-16 h-16 bg-red-100 rounded-full mx-auto mb-4 flex items-center justify-center">
      <svg class="w-8 h-8 text-red-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
      </svg>
     </div>
     <h3 class="text-xl font-bold text-gray-800 mb-2">Hapus Pengguna?</h3>
     <p class="text-gray-600 mb-6">Data pengguna akan dihapus permanen dan tidak dapat dikembalikan.</p>
     <div class="flex gap-3"><button id="cancelDeleteBtn" class="flex-1 bg-gray-200 hover:bg-gray-300 text-gray-700 py-3 rounded-xl font-semibold transition-all"> Batal </button> <button id="confirmDeleteBtn" class="flex-1 bg-red-600 hover:bg-red-700 text-white py-3 rounded-xl font-semibold transition-all"> Ya, Hapus </button>
     </div>
    </div>
   </div><!-- Loading Overlay -->
   <div id="loadingOverlay" class="fixed inset-0 loading-overlay hidden items-center justify-center z-50">
    <div class="bg-white rounded-2xl p-8 shadow-2xl text-center">
     <svg class="animate-spin h-12 w-12 text-blue-600 mx-auto mb-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle> <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
     </svg>
     <p class="text-gray-700 font-semibold" id="loadingText">Memuat data...</p>
    </div>
   </div><!-- Toast Notification -->
   <div id="toast" class="fixed bottom-6 right-6 bg-gray-800 text-white px-6 py-3 rounded-xl shadow-lg hidden transform transition-all duration-300 translate-y-full opacity-0 z-50">
    <div class="flex items-center gap-3"><span id="toastIcon">✓</span> <span id="toastMessage">Berhasil!</span>
    </div>
   </div>
  </div>
  <script>
    // =============================================
    // DATA AND STATE MANAGEMENT
    // =============================================
    
    // URL Google Apps Script untuk koneksi ke Google Sheets
    const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbzNs8mwkXGbseMQFJM78k0608zvKgdPXpPiuajCGwdpz1PRovVtNOj-rShWBDebXi2JQg/exec';
    
    const defaultConfig = {
      app_title: 'TUC 2 TKA Kombel Kawula',
      exam_duration: '75',
      primary_color: '#2563eb',
      secondary_color: '#1e40af',
      accent_color: '#10b981'
    };
    
    let config = { ...defaultConfig };
    let allData = [];
    let currentUser = null;
    let currentQuestion = 0;
    let answers = {};
    let doubts = new Set();
    let timerInterval = null;
    let timeRemaining = 120 * 60;
    let questionOrder = [];
    let deleteTargetId = null;
    let isLoadingData = false;
    
    // Soal-soal pilihan ganda
    const questions = [
      {
        id: 1,
        type: 'single',
stimulus: `Bacalah cerita di bawah ini dengan cermat

Pagi itu, cahaya mentari memasuki celah-celah jendela kamar Azka. Di kamarnya, Azka sudah terlihat rapih memakai seragam sekolah. Buku pelajaran dan peralatan sekolahnya pun sudah dimasukan ke dalam tas. Suara detak jam membuatnya tersadar sehingga dia melirik ke jam yang ada di kamarnya. Di bawah jam tersebut, tergeletak sebuah benda yang menarik perhatiannya. Benda itu berbentuk persegi panjang, tipis, dan permukaannya mengilap dilapisi kaca. Sebuah benda yang mampu menampilkan gambar bergerak dan suara. 

Sambil membenarkan letak dasinya, Azka melangkah ke ruang tamu. Di sana, sebuah benda kuno berdiri di sudut ruangan. Permukaannya halus dengan ukiran bunga mawar yang rumit. Ada banyak laci di benda itu. Di atasnya, sebuah bingkai foto usang menampilkan senyum kakek dan neneknya.`,


        question: 'Berdasarkan cerita tersebut, objek apa yang terletak di bawah jam dinding?',
        options: [
          'lemari kayu',
          'meja sekolah',
          'jendela kamar',
          'televisi'
        ],
        answer: 'televisi'
      },
      {
        id: 2,
        type: 'single',
stimulus: `Bacalah cerita di bawah ini dengan cermat

Pagi itu, cahaya mentari memasuki celah-celah jendela kamar Azka. Di kamarnya, Azka sudah terlihat rapih memakai seragam sekolah. Buku pelajaran dan peralatan sekolahnya pun sudah dimasukan ke dalam tas. Suara detak jam membuatnya tersadar sehingga dia melirik ke jam yang ada di kamarnya. Di bawah jam tersebut, tergeletak sebuah benda yang menarik perhatiannya. Benda itu berbentuk persegi panjang, tipis, dan permukaannya mengilap dilapisi kaca. Sebuah benda yang mampu menampilkan gambar bergerak dan suara. 

Sambil membenarkan letak dasinya, Azka melangkah ke ruang tamu. Di sana, sebuah benda kuno berdiri di sudut ruangan. Permukaannya halus dengan ukiran bunga mawar yang rumit. Ada banyak laci di benda itu. Di atasnya, sebuah bingkai foto usang menampilkan senyum kakek dan neneknya.`,

        question: 'Dimana letak lemari kayu tersebut?',
        options: [
          'kamar Azka',
          'ruang tamu',
          'bawah jendela',
          'sudut ruangan'
        ],
        answer: 'ruang tamu'
      },
      {
        id: 3,
        type: 'multiple',
stimulus: `Perhatikan teks pidato berikut!

Kebersihan lingkungan sekolah adalah cerminan dari sikap kita sebagai siswa yang bertanggung jawab dan peduli terhadap lingkungan tempat kita belajar. Tidak dapat dimungkiri bahwa seringkali kita melihat sampah berserakan di sekitar sekolah.Oleh karena itu, mari bersama-sama mengubah perilaku kita. Mulailah dengan hal-hal sederhana seperti membuang sampah pada tempatnya, menggunakan tempat sampah yang telah disediakan, dan menjaga kebersihan ruangan yang kita gunakan.

Sumber : https://katadata.co.id/lifestyle/varia/66629f983bfd8/4-contoh-pidato-tentang-kebersihan-lingkungan-sekolah-sebagai-edukasi.`,

        question: 'Pernyataan yang benar berdasarkan teks pidato di atas! Jawaban benar lebih dari satu.',
        options: [
          'Pidato diatas membahas tentang keindahan sekolah',
          'Pidato diatas berkaitan dengan kebersihan sekolah',
          'Pidato diatas tidak ada keterkaitan dengan kebersihan sekolah',
          'Pidato diatas berisikan ajakan kepada warga sekolah untuk menjaga lingkungan sekolah'
        ],
        answer: [
          'Pidato diatas berkaitan dengan kebersihan sekolah',
          'Pidato diatas berisikan ajakan kepada warga sekolah untuk menjaga lingkungan sekolah',
        ]
      },
      {
        id: 4,
        type: 'truefalse',
stimulus: `Perhatikan laporan hasil pengamatan di bawah ini!

Laporan Hasil Pengamatan

Tempat pengamatan	: Taman Bunga Nusantara
Waktu pengamatan	: 26 Februari 2026
Objek yang diamati	:
1. Fasilitas di Taman Bunga Nusantara
2. Kebersihan lingkungan di Taman Bunga Nusantara
3. Display Burung Merak
4. Perawatan Bunga-Bunga Musiman
Orang yang mengamati	: Farida Zulaikha

Hasil pengamatan	:

Taman Bunga Nusantara yang diresmikan pada tanggal 10 September 1995 memiliki luas 35 Ha. LAhan seluas itu dibagi menjadi beberapa fungsi, yaitu 23 Ha digunakan untuk taman bunga, 7 ha sebagai taman bermain anak-anak, 2 ha untuk taman pembibitan, dan 3 ha untuk fasilitas restoran.

Kebersihan lingkungan di Taman Bunga Nusantara sangat terjaga. Serombongan petugas kebersihan, sebagian besar ibu-ibu, siap memungut setiap sampah yang berserakan. Mereka seakan-akan tidak rela jika ada satu sampah yang mengotori taman itu.

Hal lain yang membuat menarik adalah saat aku melihat display burung merak. Aku sangat tertarik pada rangkaian bunga yang terhampar membentuk ekor burung merak yang warna-warni. Tahukah kamu, display burung merak ini dibentuk dari 20.000 rangkaian bunga musiman yang berasal dari luar negeri. Salah satunya adalah Bunga Putina. Bunga ini memiliki masa hidup dan berbunga antara 2-3 bulan. Oleh karena itu bunga ini harus kita rawat dengan ekstra, termasuk penyediaan lahan subur, penyiraman dengan takaran air yang tepat, dan pemberian insektisida secara berkala.`,


        question: 'Tentukan benar atau salah pernyataan berikut sesuai dengan teks di atas!',
        statements: [
          { text: 'Taman Bunga Nusantara merupakan kata khusus.', answer: true },
          { text: 'Bunga Putina adalah kata khusus.', answer: true },
          { text: 'Sampah adalah kata khusus.', answer: false }
        ]
      },
      {

        id: 5,
        type: 'single',
        stimulus: `Perhatikan teks di bawah ini!
 
Berdasarkan pengamatan yang dilakukan oleh Indah Kusumawardani di museum Rumah Kelahiran Bung Hatta di Sumatera Barat. Yang dilakukan pada hari Kamis, 22 Januari 2026 yang ditemani oleh pemandu museum. Ia mendapatkan hasil bahwa Mohammad Hatta adalah wakil presiden pertama Indonesia. Ia dikenal sebagai tokoh yang <b>rendah hati</b> meskipun menguasai banyak pengetahuan dan memiliki jabatan penting.`,
        question: 'Makna ungkapan kata yang bercetak tebal adalah...',
        options: [
          'suka menundukkan kepala',
          'tidak sombong',
          'tidak percaya diri',
          'merakyat'
        ],
        answer: 'tidak sombong'
      },
      {
        id: 6,
        type: 'truefalse',
        stimulus: `Perhatikan Teks Pidato Presiden RI yang ke-1 di bawah ini!
 
Saudara-saudara sekalian !

Saya telah minta saudara-saudara hadir disini untuk menyaksikan satu peristiwa maha penting dalam sejarah kita. Berpuluh-puluh tahun kita bangsa Indonesia telah berjuang untuk kemerdekaan tanah air kita. Bahkan telah beratus-ratus tahun Gelombang aksi kita untuk mencapai kemerdekaan kita itu ada naik dan turunya, tetapi jiwa kita tetap menuju kearah cita-cita. Juga didalam jaman jepang, usaha kita untuk mencapai kemerdekaan nasional tidak berhenti-henti. Di dalam jaman Jepang ini, tampaknya saja kita menyandarkan diri kepada mereka. Tetapi pada hakekatnya, tetap kita menyusun tenaga kita sendiri, tetap kita percaya kepada kekuatan sendiri. Merdeka...`,
        question: 'Tentukan <b>benar</b> atau <b>salah</b> berdasarkan teks di atas!',
        statements: [
          { text: 'Tokoh yang membacakan teks pidato adalah Ir. Soekarno.', answer: true },
          { text: 'Pidato tersebut berisi seruan untuk kemerdekaan Indonesia.', answer: true },
          { text: 'Gelombang aksi untuk mencapai kemerdekaan berlangsung selama puluhan tahun.', answer: false }
        ]
      },
      {

        id: 7,
        type: 'multiple',
        stimulus: `Perhatikan surat pribadi di bawah ini!
 
Assalamualaikum wr wb. Apa Kabar Sahabat?

Ketika surat ini aku tulis, hujan turun cukup deras. Udara sangat dingin dan suasana sepi. Namun, aku belum dapat tidur. Maklum, masih pukul delapan malam. Tiba-tiba, aku ingat kamu, teman sepermainanku pada waktu SD dulu. Bagaimana keadaanmu di Banten? Semoga sehat-sehat saja seperti aku sekarang. Hari Minggu yang lalu, aku pergi ke Taman Bungkul. Ya, tempat wisata di Kota Surabaya yang pernah kita datangi bersama dengan teman-teman satu kelas dulu. Wah, ramai sekali.

Pengunjung berkerumun di depan taman. Akan tetapi, keadaan di dalam masih cukup longgar. Aku bisa bersantai bersama dengan beberapa teman. Lumayan, cari hiburan. Aku lumayan merasa senang. Lebih senang lagi karena bertemu dengan teman-teman lama yang sekarang bersekolah di luar kota. Melody Nurramdhani, Rica Leyona, dan Sindy Ariani kebetulan juga ada di sana. Ya, mereka tetap lucu, senang bergurau seperti dulu. Mereka juga membicarakan kamu. Kata mereka, kamu juga sering bercanda`,
        question: 'Berikut Kosa kata umum yang sesuai dengan teks. Jawaban benar lebih dari satu!',
        options: [
          'Suasana',
          'Taman Bungkul',
          'Kota Surabaya',
          'Tempat Wisata'
        ],
        answer: [
          'Suasana',
          'Tempat Wisata',
        ]
      },
      {

        id: 8,
        type: 'single',
        stimulus: `Bacalah penggalan teks pidato berikut!
Anak-anakku kelas 6, 

Sebentar lagi siswa kelas 6 akan melaksanakan kegiatan TKA (Tes Kompetensi Akademik). Oleh karena itu ibu berpesan kepada kalian untuk rajin menimba ilmu sedalam mungkin supaya mendapatkan nilai yang baik. Selain itu kalian juga harus mengasah otak untuk mengisi waktu luang ketika di rumah.`,
        question: 'Arti ungkapan menimba ilmu dan mengasah otak adalah...',
        options: [
          'Belajar dengan sungguh-sungguh dan melatih pikiran supaya lebih tangkas dalam berpikir',
          'Memperoleh pengetahuan dan pikiran menjadi lebih tajam',
          'Berusaha sungguh-sungguh dan pantang menyerah',
          'Belajar dengan sungguh-sungguh dan berpikir lebih santai'
        ],
        answer: 'Belajar dengan sungguh-sungguh dan melatih pikiran supaya lebih tangkas dalam berpikir'
      },
      {

        id: 9,
        type: 'multiple',
        stimulus: `Bacalah paragraf di bawah ini!
Berdasarkan hasil dari kajian para astronom terdapat delapan planet dalam tata surya kita, yaitu Merkurius, Venus, Bumi,  Mars, Jupiter, saturnur, Uranus,  dan Neptunus.yang selalu berdedar mengelilingi matahari. Pluto pernah dikategorikan planet dalam tata surya. Akan tetapi Organisasi Astronomi Internasional, memutuskan bahwa Pluto tidak termasuk kedalam planet. Hal tersebut dikarenakan pluto jauh lebih kecil dari delapan planet lainnya.`,
        question: 'Berikut pernyataan yang sesuai dengan paragraf di atas. Jawaban benar lebih dari satu ',
        options: [
          'Terdapat sembilan planet dalam tata surya kita',
          'Semua planet dalam tata surya mengelilingi matahari',
          'Ukuran Pluto lebih besar daripada Planet Merkurius',
          'Pluto pernah dikategorikan planet dalam tata surya kita'
        ],
        answer: [
          'Semua planet dalam tata surya mengelilingi matahari',
          'Pluto pernah dikategorikan planet dalam tata surya kita',
        ]
      },
      {

        id: 10,
        type: 'single',
        stimulus: `Perhatikan kutipan teks pidato di bawah ini!
 
Yang saya hormati Bapak Kepala Sekolah, Bapak/Ibu Guru, orang tua kami tercinta, serta teman-teman kelas 6 yang saya banggakan. Pertama-tama, marilah kita panjatkan puji syukur ke hadirat Tuhan Yang Maha Esa, karena atas rahmat-Nya kita dapat berkumpul di acara perpisahan ini dalam keadaan sehat. Tidak terasa enam tahun sudah kami menimba ilmu di sekolah tercinta ini. Rasanya baru kemarin kami masuk kelas 1, belajar membaca dan menulis, namun hari ini kami harus berpamitan untuk melanjutkan ke jenjang yang lebih tinggi.`,
        question: 'Tema yang sesuai dengan teks pidato di atas adalah...',
        options: [
          'Kekeluargaan',
          'Persaudaraan',
          'Pendidikan',
          'Perpisahan'
        ],
        answer: 'Perpisahan'
      },
      {
        id: 11,
        type: 'single',
        stimulus: `Perhatikan teks hasil pengamatan berikut!
 
Saat pengamatan di halaman sekolah, terlihat beberapa tanaman tumbuh subur di area yang terkena sinar matahari langsung. Daun tampak hijau segar dan batang berdiri kokoh. Tanaman yang berada di tempat teduh tumbuh lebih lambat dan daunnya tampak pucat. Hal ini menunjukkan bahwa cahaya matahari berpengaruh terhadap pertumbuhan tanaman.`,
        question: 'Ide pokok paragraf tersebut adalah...',
        options: [
          'warna daun tanaman di sekolah',
          'perbedaan batang dan daun tanaman',
          'pengaruh cahaya matahari terhadap pertumbuhan tanaman',
          'letak tanaman di halaman sekolah'
        ],
        answer: 'pengaruh cahaya matahari terhadap pertumbuhan tanaman'
      },
      {
	id: 12,
        type: 'multiple',
        stimulus: `Perhatikan teks hasil pengamatan berikut!
Pada pagi hari, lalu lintas di depan sekolah cukup ramai. Banyak orang tua mengantar anaknya. Beberapa kendaraan berhenti tidak pada tempatnya sehingga menyebabkan kemacetan singkat. Petugas membantu menyeberangkan siswa agar tetap aman. Setelah bel masuk berbunyi, keadaan jalan kembali lancar.`,
        question: 'Berikut perilaku positif yang seharusnya dilakukan sebagai warga yang baik. Jawaban benar lebih dari satu ',
        options: [
          'mematuhi aturan berhenti kendaraan',
          'datang ke sekolah setelah bel berbunyi',
          'parkir kendaraan sembarangan',
          'menjaga ketertiban lalu lintas'
        ],
        answer: [
          'mematuhi aturan berhenti kendaraan',
          'menjaga ketertiban lalu lintas',
        ]
      },
      {
	id: 13,
        type: 'truefalse',
        stimulus: `Perhatikan teks hasil pengamatan berikut!
 
Pada hari Selasa pagi, siswa kelas VI melakukan pengamatan kegiatan di kebun sekolah. Kebun tersebut ditanami berbagai sayuran seperti bayam, cabai, dan tomat. Tanaman tumbuh di bedeng yang berbeda dan diberi papan nama. Petugas kebun menyiram tanaman setiap pagi dan sore agar tetap segar. Terlihat beberapa daun berlubang karena dimakan serangga. Untuk mengatasinya, petugas memasang perangkap serangga alami. Tanah di kebun tampak gembur karena rutin dicangkul. Siswa juga mencatat tinggi tanaman setiap minggu untuk mengetahui pertumbuhannya.`,
        question: 'Tentukan <b>benar</b> atau <b>salah</b> berdasarkan teks di atas!',
        statements: [
          { text: 'Tanaman di kebun hanya disiram sekali setiap hari.', answer: false },
          { text: 'Siswa mencatat tinggi tanaman secara berkala.', answer: true },
          { text: 'Petugas kebun menggunakan perangkap untuk mengatasi serangga.', answer: true }
        ]
      },
      {

        id: 14,
        type: 'single',
        stimulus: `Perhatikan teks hasil pengamatan berikut!
Pada hari Rabu pagi, siswa kelas VI melakukan pengamatan proses pembuatan kompos di kebun sekolah. Kegiatan diawali dengan mengumpulkan daun kering dan sisa potongan rumput di halaman. Setelah itu, bahan-bahan tersebut dimasukkan ke dalam lubang kompos yang telah disiapkan. Siswa kemudian menambahkan sisa sayuran dari kantin sebagai campuran. 

Selanjutnya, semua bahan disiram dengan air secukupnya agar lembap. Petugas kebun lalu menutup lubang kompos dengan tanah tipis. Setiap tiga hari sekali, campuran tersebut diaduk menggunakan cangkul supaya proses pembusukan merata. Setelah beberapa minggu, bahan-bahan itu berubah menjadi kompos yang berwarna gelap dan siap digunakan untuk menyuburkan tanaman.`,
        question: 'Urutan kejadian yang tepat berdasarkan teks tersebut adalah...',
        options: [
          'Menutup lubang → mengumpulkan daun → menyiram → mengaduk → menambah sisa sayur',
          'Mengumpulkan bahan → memasukkan ke lubang → menambah sisa sayur → menyiram → menutup → mengaduk berkala',
          'Menyiram → mengumpulkan bahan → memasukkan → menutup → mengaduk → menambah sisa sayur',
          'Mengumpulkan bahan → mengaduk → memasukkan → menutup → menyiram → menambah sisa sayur'
        ],
        answer: 'Mengumpulkan bahan → memasukkan ke lubang → menambah sisa sayur → menyiram → menutup → mengaduk berkala'
      },
      {
        id: 15,
        type: 'single',
        stimulus: `Perhatikan teks di bawah ini!
Energi listrik merupakan salah satu kebutuhan penting dalam kehidupan sehari-hari. Hampir semua kegiatan di rumah dan di sekolah memanfaatkan energi listrik, seperti menyalakan lampu, menggunakan kipas angin, mengisi daya gawai, hingga menjalankan komputer. Energi listrik dihasilkan dari berbagai sumber, misalnya air, batu bara, gas, dan tenaga surya. Namun, tidak semua sumber energi tersedia tanpa batas. Beberapa sumber energi dapat habis jika digunakan terus-menerus tanpa penghematan.

Penggunaan listrik yang berlebihan dapat menyebabkan pemborosan energi dan meningkatkan biaya. Contohnya, lampu yang tetap menyala pada siang hari, televisi yang dibiarkan hidup tanpa ditonton, serta pengisi daya yang tetap terpasang meskipun tidak digunakan. Jika kebiasaan ini dilakukan oleh banyak orang, kebutuhan energi akan semakin besar. Oleh sebab itu, diperlukan kebiasaan menggunakan listrik secara bijak, seperti mematikan peralatan saat tidak dipakai dan memanfaatkan cahaya matahari di siang hari.`,
        question: 'Amanat yang sesuai dengan isi teks tersebut adalah...',
        options: [
          'Kita harus menggunakan energi listrik secara hemat dan bijak',
          'Energi listrik sebaiknya hanya digunakan di sekolah',
          'Gunakan listrik sebanyak mungkin karena energi tidak akan pernah habis',
          'Peralatan listrik sebaiknya selalu dinyalakan'
        ],
        answer: 'Kita harus menggunakan energi listrik secara hemat dan bijak'
      },
      {
        id: 16,
        type: 'multiple',
        stimulus: `<b>RUMAH KURA KURA</b>
Kura-kura bersedih karena rumahnya di pinggir sungai, sering hancur bila musim hujan. Saat itu Kura-kura belum mempunyai rumah yang menempel di punggungnya.
"Jangan menangis, Kura-kura. Lebih baik kamu membuat rumah di tempat yang lebih tinggi, biar tidak kena banjir," kata Monyet yang kebetulan lewat.

Kura-kura mulai membangun rumah di tempat yang lebih tinggi, dibantu Monyet. Tapi, tiap ada hujan disertai angin, rumah Kura-kura tetap hancur.
"Kemarin kita salah karena membuat rumah tanpa dihubungkan ke dalam tanah," kata Monyet. Kura-kura berhenti menangis. Bersama Monyet, ia mulai membangun rumah lagi. Setiap sisi rumahnya ditopang dengan kayu panjang yang menancap di dalam tanah.

Suatu hari, rumah Kura-kura terbakar. la kembali bersedih. "Jangan menangis, Kura-kura. Biar rumahmu aman, sepertinya kamu harus membuat rumah yang bisa dibawa kemana-mana," kata Monyet. "Dibawa?" Kura-kura tidak mengerti. "Aku harus menggendong rumah yang besar?"
"Rumahnya tidak besar, tapi pas dengan tubuhmu,"

Kura-kura tersenyum. la menyukai ide Monyet. Esoknya, Kura-kura membuat rumah lagi. Kali ini, ukurannya dibuat kecil. Monyet membantu membuatnya. Ketika sudah jadi, benda itu diletakkan di punggung Kura-kura. Awalnya, memang terasa tidak nyaman. Tapi lama-lama, Kura-kura merasa nyaman. Rumah barunya juga tempat aman untuk berlindung. Ketika dalam bahaya, ia tinggal bersembunyi di rumah batoknya.`,
        question: 'Berikut peristiwa yang relevan dengan kehidupan sehari-hari berdasarkan teks tersebut. Jawaban benar lebih dari satu',
        options: [
          'Hasan menunda mengerjakan PR dan memilih bermain game sampai malam',
          'Bona terus berlatih mengerjakan soal Matematika meskipun awalnya sering salah, sampai akhirnya bisa dan mendapat nilai baik',
          'Rama tidak mengecek kembali jawaban ujian sehingga banyak kesalahan kecil terlewat',
          'Dira tetap semangat belajar bersepeda setelah beberapa kali terjatuh, hingga akhirnya bisa bersepeda dengan lancar'
        ],
        answer: [
          'Bona terus berlatih mengerjakan soal Matematika meskipun awalnya sering salah, sampai akhirnya bisa dan mendapat nilai baik',
          'Dira tetap semangat belajar bersepeda setelah beberapa kali terjatuh, hingga akhirnya bisa bersepeda dengan lancar'
        ]
      },
      {
	id: 17,
        type: 'truefalse',
        stimulus: `Bacalah teks hasil pengamatan berikut!
 
Kantong semar merupakan tumbuhan unik yang ditemukan di daerah lembap seperti hutan dan rawa. Tumbuhan ini memiliki daun yang ujungnya membentuk kantong. Kantong tersebut berfungsi sebagai perangkap serangga. Pada bagian dalam kantong terdapat cairan yang dapat mencerna serangga yang masuk. Serangga biasanya tertarik karena warna kantong yang cerah dan adanya nektar di bibir kantong. Kantong semar termasuk tumbuhan pemakan serangga karena hidup di tanah yang miskin unsur hara. Akar dan batangnya tetap melakukan fungsi seperti tumbuhan lain, tetapi kebutuhan nutrisinya dibantu dari hasil mencerna serangga.perangkap serangga alami.`,
        question: 'Tentukan <b>benar</b> atau <b>salah</b> berdasarkan teks di atas!',
        statements: [
          { text: 'Kantong semar menangkap serangga menggunakan kantong pada ujung daunnya.', answer: true },
          { text: 'Kantong semar hidup di daerah yang sangat kering dan berpasir.', answer: false },
          { text: 'Cairan di dalam kantong berfungsi untuk mencerna serangga yang terperangkap.', answer: true }
        ]
      },
      {

        id: 18,
        type: 'single',
        stimulus: `Perhatikan teks berikut!
Gerhana bulan adalah peristiwa ketika bulan tidak tampak terang seperti biasanya karena terhalang bayangan bumi. Peristiwa ini terjadi saat matahari, bumi, dan bulan berada pada satu garis lurus. Prosesnya dimulai ketika matahari memancarkan cahaya ke segala arah. Cahaya tersebut seharusnya mengenai permukaan bulan. Namun, saat bumi berada di antara matahari dan bulan, cahaya matahari terhalang oleh bumi. Akibatnya, bayangan bumi jatuh ke permukaan bulan. Pada tahap awal, bulan mulai tampak redup. Selanjutnya, sebagian permukaan bulan tertutup bayangan (gerhana sebagian). Jika seluruh permukaan bulan tertutup bayangan bumi, terjadilah gerhana bulan total. Setelah posisi bergeser, bulan kembali terkena cahaya matahari dan tampak terang kembali.`,
        question: 'Bagan urutan proses terjadinya gerhana bulan yang benar adalah...',
        options: [
          'Bulan diantara matahari dan bumi - bayangan bulan jatuh ke bumi - bulan gelap - terang kembali',
          'Matahari memancarkan cahaya - bulan menghalangi bumi - bayangan bulan jatuh ke bumi - gerhana',
          'Matahari memancarkan cahaya - bumi berada diantara matahari dan bulan - bayangan bumi menutup bulan - bulan tampak gelap - posisi bergeser - bulan terang kembali',
          'Bumi memancarkan cahaya - matahari terhalang bulan - bayangan matahari jatuh ke bumi - gerhana'
        ],
        answer: 'Matahari memancarkan cahaya - bumi berada diantara matahari dan bulan - bayangan bumi menutup bulan - bulan tampak gelap - posisi bergeser - bulan terang kembali'
      },
      {

        id: 19,
        type: 'single',
        stimulus: `Bacalah teks pidato berikut!
Assalamu’alaikum warahmatullahi wabarakatuh.
Selamat pagi dan salam sejahtera untuk kita semua.

Yang saya hormati Bapak dan Ibu guru, serta teman-teman yang saya banggakan.
Pertama-tama marilah kita panjatkan puji dan syukur ke hadirat Tuhan Yang Maha Esa karena atas rahmat-Nya kita dapat berkumpul di halaman sekolah dalam keadaan sehat.

Pada kesempatan pagi hari ini, saya akan menyampaikan tentang pentingnya menjaga kebersihan lingkungan sekolah. Lingkungan yang bersih membuat kegiatan belajar menjadi nyaman dan sehat. Sampah yang dibuang sembarangan dapat menimbulkan bau tidak sedap dan menjadi sumber penyakit. Oleh karena itu, sekolah mengadakan kegiatan kerja bakti bersama yang akan dilaksanakan setelah jam pelajaran kedua.

Setiap kelas sudah mendapatkan pembagian tugas, mulai dari membersihkan ruang kelas, halaman, taman, hingga selokan kecil di sekitar sekolah. Melalui kegiatan ini, kita belajar bekerja sama, peduli lingkungan, dan bertanggung jawab terhadap kebersihan bersama.

Sebagai penutup, dapat disimpulkan bahwa kebersihan sekolah adalah tanggung jawab seluruh warga sekolah. Mari kita laksanakan kegiatan ini dengan semangat dan saling membantu.

Saya mengajak teman-teman semua untuk ikut berpartisipasi aktif dan melaksanakan tugas dengan baik. Terima kasih atas perhatian teman-teman. Mohon maaf apabila ada kata-kata yang kurang berkenan.

Wassalamu’alaikum warahmatullahi wabarakatuh.`,
        question: 'Peristiwa yang terjadi berdasarkan isi pidato tersebut adalah...',
        options: [
          'Pelaksanaan lomba kebersihan kelas',
          'Pertandingan olahraga antar kelas',
          'Kegiatan pentas seni sekolah',
          'Kegiatan kerja bakti membersihkan lingkungan sekolah'
        ],
        answer: 'Kegiatan kerja bakti membersihkan lingkungan sekolah'
      },
      {
 
	id: 20,
        type: 'single',
        stimulus: `Bacalah teks berikut!
Setiap pagi, suasana di halte dekat sekolah tampak cukup ramai. Para siswa berdiri berbaris menunggu angkutan datang. Sebagian membaca buku kecil, ada yang berbincang pelan, dan ada yang memperhatikan kendaraan yang lewat. Ketika bus datang, para penumpang tidak saling mendorong. Mereka naik satu per satu setelah penumpang di dalam turun. Seorang petugas membantu menyeberangkan siswa agar aman sampai ke sisi jalan. Suasana tetap tertib meskipun banyak orang datang dan pergi.`,
        question: 'Contoh peristiwa yang relevan dengan kehidupan sehari-hari berdasarkan teks tersebut adalah...',
        options: [
          'Mengantre dengan tertib saat menunggu kendaraan umum',
          'Menyeberang jalan tanpa melihat kanan kiri terlebih dahulu',
          'Berlari dan saling mendahului saat naik kendaraan',
          'Turun dengan tergesa-gesa tanpa melihat kondisi jalan di bawah'
        ],
        answer: 'Mengantre dengan tertib saat menunggu kendaraan umum'
      },
      {
id: 21,
        type: 'single',
        stimulus: `Bacalah puisi berikut!
Mentari pagi menyapa bumi
Burung berkicau riang sekali
Anak-anak bergegas pergi
Menuntut ilmu penuh mimpi.`,
        question: 'Berdasarkan puisi di atas kegiatan yang dilakukan anak-anak adalah...',
        options: [
          'Bermain bersama di halaman',
          'Pergi sekolah untuk belajar',
          'Membantu orang tua di rumah',
          'Berwisata menikmati pagi'
        ],
        answer: 'Pergi sekolah untuk belajar'
      },
      {
	id: 22,
        type: 'single',
        stimulus: `Bacalah teks berikut!
Teks Hasil Pengamatan

Saat melakukan pengamatan cuaca selama satu minggu, siswa mencatat bahwa hari Senin hingga Rabu cerah, Kamis hujan ringan, dan Jumat berawan. Suhu tertinggi terjadi pada hari Selasa, sedangkan suhu terendah pada hari Kamis setelah hujan turun.`,
        question: 'Informasi yang sesuai dengan teks di atas adalah...',
        options: [
          'Cuaca sepanjang minggu selalu cerah',
          'Suhu terendah terjadi saat cuaca cerah',
          'Hujan terjadi pada hari kamis',
          'Hari jumat memiliki suhu tertinggi'
        ],
        answer: 'Hujan terjadi pada hari kamis'
      },
      {
	id: 23,
        type: 'multiple',
        stimulus: `Bacalah teks fabel berikut!

<b>Kura-Kura Dan Burung Bangau</b>

Pada musim kemarau, sebuah danau mulai mengering. Kura-kura merasa khawatir karena air semakin sedikit. Dua burung bangau menawarkan bantuan dengan cara membawa kura-kura ke danau lain menggunakan sebatang kayu yang digigit bersama. Mereka berpesan agar kura-kura tidak membuka mulut selama perjalanan.
Di tengah perjalanan, hewan-hewan di bawah mengejek cara terbang mereka. Kura-kura tidak tahan dan membuka mulut untuk membalas ejekan. Ia pun jatuh ke tanah. Setelah selamat, kura-kura menyadari kesalahannya karena tidak mematuhi nasihat temannya.`,
        question: 'Berikut nilai moral yang dapat dipetik berdasarkan teks tersebut. Jawaban benar lebih dari satu',
        options: [
          'Pentingnya mematuhi nasihat yang baik',
          'Mengendalikan diri saat menghadapi ejekan',
          'Membalas ejekan agar dihormati',
          'Menolak bantuan teman'
        ],
        answer: [
          'Pentingnya mematuhi nasihat yang baik',
          'Mengendalikan diri saat menghadapi ejekan'
        ]
      },
      {
	id: 24,
        type: 'single',
        stimulus: `Bacalah teks berikut!
Teks Hasil Pengamatan

Pada hari Jumat, siswa kelas VI melakukan pengamatan tentang kebersihan sungai di dekat sekolah. Mereka menemukan bahwa air sungai terlihat keruh dan terdapat sampah plastik di beberapa bagian. Di tepi sungai tumbuh rumput liar yang cukup lebat. Selain itu, beberapa warga masih mencuci pakaian di sungai tersebut. Berdasarkan hasil pengamatan, siswa menyimpulkan bahwa kebersihan sungai perlu mendapat perhatian lebih dari masyarakat sekitar.`,
        question: 'Ringkasan yang paling tepat berdasarkan teks tersebut adalah...',
        options: [
          'Siswa kelas VI mengamati sungai yang kotor dan menemukan banyak rumput liar serta warga mencuci pakaian di sana sehingga kebersihannya perlu diperhatikan',
          'Sungai di dekat sekolah sangat indah dan banyak dimanfaatkan warga untuk berbagai kegiatan sehari-hari',
          'Kegiatan pengamatan dilakukan pada hari Jumat dan siswa merasa senang berada di tepi sungai',
          'Sungai di dekat sekolah memiliki air jernih dan lingkungan yang terawat dengan baik'
        ],
        answer: 'Siswa kelas VI mengamati sungai yang kotor dan menemukan banyak rumput liar serta warga mencuci pakaian di sana sehingga kebersihannya perlu diperhatikan'
      },
      {
	id: 25,
        type: 'multiple',
        stimulus: `Bacalah teks diskripsi berikut!

<b>Teks Diskripsi</b>

Perpustakaan sekolah terletak di samping ruang guru. Ruangan ini memiliki rak-rak buku yang tersusun rapi berdasarkan jenis bacaan. Di sudut ruangan tersedia meja baca yang bersih dan nyaman. Udara di dalam perpustakaan terasa sejuk karena ventilasi yang cukup. Banyak siswa memanfaatkannya untuk membaca atau mengerjakan tugas saat waktu istirahat.`,
        question: 'Berikut gagasan pendukung yang sesuai dengan teks tersebut. Jawaban benar lebih dari satu',
        options: [
          'Perpustakaan sekolah memiliki rak-rak buku yang tersusun rapi',
          'Perpustakaan di sekolahku sangat ramai pengunjung',
          'Perpustakaan digunakan siswa untuk membaca dan mengerjakan tugas',
          'Perpustakaan terletak di samping ruang guru'
        ],
        answer: [
          'Perpustakaan sekolah memiliki rak-rak buku yang tersusun rapi',
          'Perpustakaan digunakan siswa untuk membaca dan mengerjakan tugas'
        ]
      },
      {

	id: 26,
        type: 'agree-disagree',
        stimulus: `Bacalah teks berikut!
Teks Eksplanasi

Hujan terjadi karena proses penguapan air oleh panas matahari. Uap air naik ke atmosfer dan membentuk awan. Ketika awan sudah jenuh, butiran air jatuh ke bumi sebagai hujan. Air hujan sangat penting bagi kehidupan karena membantu menyuburkan tanah, mengisi sumber air, dan mendukung pertumbuhan tanaman.`,
        question: 'Tentukan apakah pernyataan berikut Benar (B) atau Salah (S) berdasarkan relevansinya dengan kehidupan sehari-hari!',
        statements: [
          { text: 'Air hujan bermanfaat bagi petani karena membantu tanaman tumbuh.', answer: true },
          { text: 'Proses hujan tidak memiliki pengaruh terhadap ketersediaan air bersih.', answer: false },
          { text: 'Memahami proses hujan dapat membantu manusia menjaga lingkungan.', answer: true }
        ]
      },
      {
	id: 27,
        type: 'single',
stimulus: `Bacalah teks berikut
Teks Pengamatan

Siswa kelas VI melakukan pengamatan terhadap pertumbuhan tanaman kacang hijau selama satu minggu. Pada hari pertama, biji ditanam dalam kapas basah. Hari ketiga mulai muncul tunas kecil. Hari kelima tunas tumbuh lebih tinggi dan daun pertama terlihat. Pada hari ketujuh tanaman memiliki dua helai daun dan batang yang lebih kuat.`,

        question: 'Bagan urutan pertumbuhan yang paling tepat berdasarkan teks tersebut adalah...',
        options: [
          'Hari 1: Tunas muncul → Hari 3: Biji ditanam → Hari 5: Daun terlihat → Hari 7: Batang kuat',
          'Hari 1: Biji ditanam → Hari 3: Tunas muncul → Hari 5: Daun pertama terlihat → Hari 7: Batang kuat dan dua daun',
          'Hari 1: Biji ditanam → Hari 3: Daun terlihat → Hari 5: Tunas muncul → Hari 7: Tanaman mati',
          'Hari 1: Biji direndam → Hari 3: Akar hilang → Hari 5: Daun gugur → Hari 7: Tanaman layu'
        ],
        answer: 'Hari 1: Biji ditanam → Hari 3: Tunas muncul → Hari 5: Daun pertama terlihat → Hari 7: Batang kuat dan dua daun'
      },
      {

id: 28,
  type: 'single',
  stimulus: `Bacalah teks berikut!
Cerita Anak

Setiap pagi, Rina berangkat ke sekolah lebih awal. Ia membantu guru merapikan buku di perpustakaan sebelum pelajaran dimulai. Suatu hari, temannya menjatuhkan sampah di lantai kelas. Tanpa diminta, Rina mengambil dan membuangnya ke tempat sampah. Ia percaya bahwa menjaga kebersihan adalah tanggung jawab bersama.`,
  question: 'Nilai keteladanan yang dapat ditiru dari tokoh Rina adalah...',
  options: ['Datang lebih awal agar mendapat pujian guru', 'Membantu dan peduli terhadap lingkungan sekitar', 'Menghindari teman yang berbuat salah', 'Menunggu perintah guru sebelum bertindak'],
  answer: 'Membantu dan peduli terhadap lingkungan sekitar'
},
{
  id: 29,
  type: 'multiple',
  stimulus: `Bacalah teks fabel berikut!
Kancil Dan Harimau 

Di sebuah hutan, Kancil dikenal sebagai hewan yang cerdik. Suatu hari, ia melihat Harimau terperangkap dalam lubang pemburu. Harimau memohon agar Kancil menolongnya dan berjanji tidak akan memangsa Kancil. Dengan berpikir sejenak, Kancil mencari akal. Ia meminta Harimau berjanji di hadapan hewan-hewan lain. Setelah Harimau berjanji, Kancil mengajak Gajah dan Kerbau membantu mengeluarkannya.

Namun, setelah bebas, Harimau lupa pada janjinya dan hendak menerkam Kancil. Dengan cepat Kancil berkata, “Tunggu! Bukankah kau tadi terjebak di lubang sempit itu? Aku tidak percaya tubuh sebesar itu bisa masuk.” Harimau yang sombong membuktikannya dengan masuk kembali ke lubang. Saat itulah Kancil dan hewan lainnya meninggalkannya.

Sejak saat itu, Harimau kapok dan tidak lagi meremehkan kecerdikan Kancil.`,
  question: 'Berdasarkan teks di atas, berilah tanda centang untuk pernyataan yang benar (jawaban lebih dari satu)!',
  options: [
    'Kancil langsung menolong Harimau tanpa berpikir panjang.',
    'Harimau berjanji tidak akan memangsa Kancil sebelum ditolong.',
    'Gajah dan Kerbau membantu mengeluarkan Harimau dari lubang.',
    'Harimau menepati janjinya setelah dibebaskan.'
  ],
  answer: [
          'Harimau berjanji tidak akan memangsa Kancil sebelum ditolong.',
          'Gajah dan Kerbau membantu mengeluarkan Harimau dari lubang.'
        ]
},
{
  id: 30,
  type: 'single',
  stimulus: `Bacalah teks berikut!
Suatu sore, Raka bermain bola di halaman rumah bersama teman-temannya. Ibunya sudah mengingatkan agar Raka berhenti bermain sebelum magrib dan segera mandi. Namun, karena terlalu asyik, Raka mengabaikan panggilan ibunya.

Saat menendang bola dengan keras, bola itu melambung dan memecahkan kaca jendela rumah Pak Darto, tetangganya. Raka dan teman-temannya terdiam. Pak Darto keluar rumah dengan wajah marah.

Raka merasa takut dan bingung. Ia tahu telah melakukan kesalahan, tetapi ia juga khawatir dimarahi ibunya karena tidak menuruti nasihat.`,
  question: 'Peristiwa awal yang menyebabkan terjadinya konflik dalam cerita tersebut adalah...',
  options: [
    'Raka merasa takut dimarahi ibunya',
    'Bola yang ditendang Raka memecahkan kaca jendela Pak Darto',
    'Pak Darto keluar rumah dengan wajah marah',
    'Raka bermain bola di halaman rumah'
  ],
  answer: 'Bola yang ditendang Raka memecahkan kaca jendela Pak Darto'
}];
    
    // =============================================
    // GOOGLE SHEETS API FUNCTIONS
    // =============================================
    
    function showLoading(text = 'Memuat data...') {
      document.getElementById('loadingText').textContent = text;
      document.getElementById('loadingOverlay').classList.remove('hidden');
      document.getElementById('loadingOverlay').classList.add('flex');
    }
    
    function hideLoading() {
      document.getElementById('loadingOverlay').classList.add('hidden');
      document.getElementById('loadingOverlay').classList.remove('flex');
    }
    
    async function fetchAllData() {
      if (isLoadingData) return;
      isLoadingData = true;
      
      try {
        const response = await fetch(`${GOOGLE_SCRIPT_URL}?action=getAllData&t=${Date.now()}`);
        const result = await response.json();
        
        if (result.success) {
          allData = result.data;
          return true;
        } else {
          throw new Error(result.error || 'Gagal mengambil data');
        }
      } catch (error) {
        console.error('Error fetching data:', error);
        showToast('Gagal memuat data dari spreadsheet', false);
        return false;
      } finally {
        isLoadingData = false;
      }
    }
    
    async function addUserToSheet(userData) {
      try {
        showLoading('Menyimpan pengguna...');
        
        const response = await fetch(`${GOOGLE_SCRIPT_URL}?action=addUser`, {
          method: 'POST',
          body: JSON.stringify(userData)
        });
        
        const result = await response.json();
        hideLoading();
        
        if (result.success) {
          await fetchAllData();
          return true;
        } else {
          throw new Error(result.message || 'Gagal menambah user');
        }
      } catch (error) {
        hideLoading();
        console.error('Error adding user:', error);
        showToast(error.message || 'Gagal menambah pengguna', false);
        return false;
      }
    }
    
    async function updateUserInSheet(userData) {
      try {
        showLoading('Memperbarui pengguna...');
        
        const response = await fetch(`${GOOGLE_SCRIPT_URL}?action=updateUser`, {
          method: 'POST',
          body: JSON.stringify(userData)
        });
        
        const result = await response.json();
        hideLoading();
        
        if (result.success) {
          await fetchAllData();
          return true;
        } else {
          throw new Error(result.message || 'Gagal update user');
        }
      } catch (error) {
        hideLoading();
        console.error('Error updating user:', error);
        showToast(error.message || 'Gagal memperbarui pengguna', false);
        return false;
      }
    }
    
    async function deleteUserFromSheet(username) {
      try {
        showLoading('Menghapus pengguna...');
        
        const response = await fetch(`${GOOGLE_SCRIPT_URL}?action=deleteUser`, {
          method: 'POST',
          body: JSON.stringify({ username })
        });
        
        const result = await response.json();
        hideLoading();
        
        if (result.success) {
          await fetchAllData();
          return true;
        } else {
          throw new Error(result.message || 'Gagal hapus user');
        }
      } catch (error) {
        hideLoading();
        console.error('Error deleting user:', error);
        showToast(error.message || 'Gagal menghapus pengguna', false);
        return false;
      }
    }
    
    async function saveResultToSheet(resultData) {
      try {
        showLoading('Menyimpan hasil ujian...');
        
        const response = await fetch(`${GOOGLE_SCRIPT_URL}?action=saveResult`, {
          method: 'POST',
          body: JSON.stringify(resultData)
        });
        
        const result = await response.json();
        hideLoading();
        
        if (result.success) {
          await fetchAllData();
          return true;
        } else {
          throw new Error(result.message || 'Gagal simpan hasil');
        }
      } catch (error) {
        hideLoading();
        console.error('Error saving result:', error);
        showToast(error.message || 'Gagal menyimpan hasil ujian', false);
        return false;
      }
    }
    
    // =============================================
    // UTILITY FUNCTIONS
    // =============================================
    
    function showToast(message, isSuccess = true) {
      const toast = document.getElementById('toast');
      const toastIcon = document.getElementById('toastIcon');
      const toastMessage = document.getElementById('toastMessage');
      
      toastIcon.textContent = isSuccess ? '✓' : '  ';
      toastMessage.textContent = message;
      toast.classList.remove('hidden', 'translate-y-full', 'opacity-0');
      toast.classList.add('translate-y-0', 'opacity-100');
      toast.style.backgroundColor = isSuccess ? '#059669' : '#dc2626';
      
      setTimeout(() => {
        toast.classList.add('translate-y-full', 'opacity-0');
        setTimeout(() => toast.classList.add('hidden'), 300);
      }, 3000);
    }
    
    function shuffleArray(array) {
      const shuffled = [...array];
      for (let i = shuffled.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
      }
      return shuffled;
    }
    
    function formatTime(seconds) {
      const mins = Math.floor(seconds / 60);
      const secs = seconds % 60;
      return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
    }
    
    function getUsers() {
      return allData.filter(d => d.type === 'user');
    }
    
    function getResults() {
      return allData.filter(d => d.type === 'result');
    }
    
    // =============================================
    // PAGE NAVIGATION
    // =============================================
    
    function showPage(pageId) {
      const pages = ['loginPage', 'adminLoginPage', 'examPage', 'resultPage', 'adminPanel'];
      pages.forEach(page => {
        const el = document.getElementById(page);
        if (page === pageId) {
          el.classList.remove('hidden');
          el.classList.add('flex');
        } else {
          el.classList.add('hidden');
          el.classList.remove('flex');
        }
      });
    }
    
    // =============================================
    // LOGIN HANDLERS
    // =============================================
    
    async function handleStudentLogin(e) {
      e.preventDefault();
      
      const username = document.getElementById('username').value.trim();
      const password = document.getElementById('password').value.trim();
      const loginError = document.getElementById('loginError');
      const loginBtn = document.getElementById('loginBtn');
      const loginBtnText = document.getElementById('loginBtnText');
      const loginBtnLoading = document.getElementById('loginBtnLoading');
      
      loginBtnText.classList.add('hidden');
      loginBtnLoading.classList.remove('hidden');
      loginBtn.disabled = true;
      
      // Fetch latest data from spreadsheet
      await fetchAllData();
      
      setTimeout(() => {
        const users = getUsers();
        const user = users.find(u => u.username === username && u.password === password && u.role !== 'admin');
        
        if (user) {
          currentUser = user;
          loginError.classList.add('hidden');
          startExam();
        } else {
          loginError.classList.remove('hidden');
        }
        
        loginBtnText.classList.remove('hidden');
        loginBtnLoading.classList.add('hidden');
        loginBtn.disabled = false;
      }, 500);
    }
    
    async function handleAdminLogin(e) {
      e.preventDefault();
      
      const username = document.getElementById('adminUsername').value.trim();
      const password = document.getElementById('adminPassword').value.trim();
      const loginError = document.getElementById('adminLoginError');
      
      showLoading('Memverifikasi admin...');
      await fetchAllData();
      hideLoading();
      
      const users = getUsers();
      const adminUser = users.find(u => u.username === username && u.password === password && u.role === 'admin');
      
      if (adminUser) {
        loginError.classList.add('hidden');
        showPage('adminPanel');
        renderAdminData();
      } else {
        loginError.classList.remove('hidden');
      }
    }
    
    // =============================================
    // EXAM FUNCTIONS
    // =============================================
    
    function startExam() {
      if (questions.length === 0) {
        showToast('Soal belum tersedia. Hubungi admin untuk memperbarui soal.', false);
        return;
      }
      
      answers = {};
      doubts = new Set();
      currentQuestion = 0;
      timeRemaining = parseInt(config.exam_duration || defaultConfig.exam_duration) * 60;
      questionOrder = shuffleArray([...Array(questions.length).keys()]);
      
      document.getElementById('userName').textContent = currentUser.name;
      document.getElementById('userClass').textContent = currentUser.kelas;
      document.getElementById('userPhoto').src = currentUser.photo || '';
      document.getElementById('examTitle').textContent = config.app_title || defaultConfig.app_title;
      
      showPage('examPage');
      
      // Show desktop nav panel on desktop
      const navPanel = document.getElementById('questionNavPanel');
      if (window.innerWidth >= 768) {
        navPanel.classList.remove('hidden');
        navPanel.classList.add('flex');
      }
      
      renderQuestion();
      renderQuestionNav();
      startTimer();
      updateProgress();
    }
    
    function startTimer() {
      if (timerInterval) clearInterval(timerInterval);
      
      const timerEl = document.getElementById('timer');
      const timerDisplay = document.getElementById('timerDisplay');
      
      timerInterval = setInterval(() => {
        timeRemaining--;
        timerEl.textContent = formatTime(timeRemaining);
        
        if (timeRemaining <= 300) {
          timerDisplay.classList.add('timer-warning');
          timerDisplay.style.backgroundColor = 'rgba(239, 68, 68, 0.3)';
        }
        
        if (timeRemaining <= 0) {
          clearInterval(timerInterval);
          submitExam();
        }
      }, 1000);
    }
    
    function renderQuestion() {
      const qIndex = questionOrder[currentQuestion];
      const q = questions[qIndex];
      const container = document.getElementById('questionContainer');
      
      let html = `
        <div class="flex items-center gap-3 mb-6">
          <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-lg text-sm font-semibold">
            Soal ${currentQuestion + 1} dari ${questions.length}
          </span>
          <span class="bg-gray-100 text-gray-600 px-3 py-1 rounded-lg text-sm">
            ${getQuestionTypeLabel(q.type)}
          </span>
          ${doubts.has(qIndex) ? '<span class="bg-yellow-100 text-yellow-700 px-3 py-1 rounded-lg text-sm font-semibold">⚠️ Ragu-ragu</span>' : ''}
        </div>
      `;
      
      // Tampilkan stimulus bacaan jika ada
      if (q.stimulus) {
        html += `
          <div class="bg-blue-50 border-l-4 border-blue-500 p-4 mb-6 rounded">
            <p class="text-xs text-blue-600 font-semibold mb-2">📖 BACAAN</p>
            <div class="text-sm text-gray-700 leading-relaxed whitespace-pre-wrap">${q.stimulus}</div>
          </div>
        `;
      }
      
      // Tampilkan gambar jika ada
      if (q.image) {
        html += `
          <div class="mb-6 bg-gray-100 rounded-lg overflow-hidden flex items-center justify-center min-h-64">
            <img src="${q.image}" alt="Pertanyaan" class="max-w-full h-auto max-h-96 object-contain" loading="lazy"
              onerror="console.error('Image failed to load:', this.src); this.style.background='#f3f4f6'; this.alt='Gambar tidak dapat dimuat';">
          </div>
        `;
      }
      
      html += `<div class="text-lg text-gray-800 mb-6 leading-relaxed font-medium">${q.question}</div>`;
      
      const savedAnswer = answers[qIndex];
      
      switch(q.type) {
        case 'single':
          html += renderSingleChoice(q, savedAnswer);
          break;
        case 'multiple':
          html += renderMultipleChoice(q, savedAnswer);
          break;
        case 'short':
          html += renderShortAnswer(q, savedAnswer);
          break;
        case 'matching':
          html += renderMatching(q, savedAnswer);
          break;
        case 'truefalse':
          html += renderTrueFalse(q, savedAnswer);
          break;
        case 'agree-disagree':
          html += renderAgreeDisagree(q, savedAnswer);
          break;
      }
      
      container.innerHTML = html;
      container.classList.add('fade-in');
      
      if (q.type === 'matching') {
        setupMatchingDragDrop(qIndex);
      }
      
      const doubtBtnText = document.getElementById('doubtBtnText');
      doubtBtnText.textContent = doubts.has(qIndex) ? 'Hapus Ragu' : 'Ragu-ragu';
      
      document.getElementById('prevBtn').disabled = currentQuestion === 0;
    }
    
    function getQuestionTypeLabel(type) {
      const labels = {
        'single': 'Pilihan Ganda',
        'multiple': 'Pilihan Ganda Kompleks',
        'short': 'Isian Singkat',
        'matching': 'Menjodohkan',
        'truefalse': 'Benar/Salah',
        'agree-disagree': 'Setuju/Tidak Setuju'
      };
      return labels[type] || type;
    }
    
    function renderSingleChoice(q, saved) {
      let html = `<div class="space-y-3">`;
      
      // If question has images (like question 19 with diagrams)
      if (q.images && q.images.length > 0) {
        q.options.forEach((opt, i) => {
          const img = q.images[i];
          const label = String.fromCharCode(65 + i); // A, B, C, D
          html += `
            <label class="flex flex-col gap-3 p-4 border-2 rounded-xl cursor-pointer transition-all hover:border-blue-300 hover:bg-blue-50 ${saved === opt ? 'border-blue-500 bg-blue-50' : 'border-gray-200'}">
              <div class="flex items-start gap-4">
                <input type="radio" name="answer" value="${opt}" ${saved === opt ? 'checked' : ''} 
                  onchange="saveAnswer('${opt}')" 
                  class="w-5 h-5 text-blue-600 border-gray-300 focus:ring-blue-500 flex-shrink-0 mt-1">
                <span class="font-bold text-lg text-blue-600">${label}.</span>
              </div>
              <div class="bg-gray-50 rounded-lg p-3 overflow-hidden">
                <img src="${img.url}" alt="${img.label}" class="w-full h-auto max-h-screen object-contain rounded" loading="lazy"
                  onerror="console.error('Image failed to load:', this.src); this.style.background='#e5e7eb'; this.alt='Gambar tidak dapat dimuat';">
              </div>
            </label>
          `;
        });
      } else {
        // Regular text options
        html += q.options.map((opt, i) => `
          <label class="flex items-center gap-4 p-4 border-2 rounded-xl cursor-pointer transition-all hover:border-blue-300 hover:bg-blue-50 ${saved === opt ? 'border-blue-500 bg-blue-50' : 'border-gray-200'}">
            <input type="radio" name="answer" value="${opt}" ${saved === opt ? 'checked' : ''} 
              onchange="saveAnswer('${opt}')" 
              class="w-5 h-5 text-blue-600 border-gray-300 focus:ring-blue-500">
            <span class="flex-1 text-gray-700">${String.fromCharCode(65 + i)}. ${opt}</span>
          </label>
        `).join('');
      }
      
      html += `</div>`;
      return html;
    }
    
    function renderMultipleChoice(q, saved) {
      const savedArr = saved ? JSON.parse(saved) : [];
      return `
        <p class="text-sm text-gray-500 mb-4 bg-yellow-50 p-3 rounded-lg">💡 Pilih semua jawaban yang benar</p>
        <div class="space-y-3">
          ${q.options.map((opt, i) => `
            <label class="flex items-center gap-4 p-4 border-2 rounded-xl cursor-pointer transition-all hover:border-blue-300 hover:bg-blue-50 ${savedArr.includes(opt) ? 'border-blue-500 bg-blue-50' : 'border-gray-200'}">
              <input type="checkbox" value="${opt}" ${savedArr.includes(opt) ? 'checked' : ''} 
                onchange="saveMultipleAnswer()" 
                class="w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500">
              <span class="flex-1 text-gray-700">${String.fromCharCode(65 + i)}. ${opt}</span>
            </label>
          `).join('')}
        </div>
      `;
    }
    
    function renderShortAnswer(q, saved) {
      return `
        <div class="max-w-md">
          <input type="text" value="${saved || ''}" 
            oninput="saveAnswer(this.value)"
            placeholder="Ketik jawaban Anda..."
            class="w-full px-5 py-4 text-lg border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all outline-none">
          <p class="text-sm text-gray-500 mt-2">Ketik angka atau teks singkat sebagai jawaban</p>
        </div>
      `;
    }
    
    function renderMatching(q, saved) {
      const savedMatch = saved ? JSON.parse(saved) : {};
      const shuffledRight = shuffleArray([...q.rightItems]);
      
      return `
        <p class="text-sm text-gray-500 mb-4 bg-yellow-50 p-3 rounded-lg">💡 <span class="hidden md:inline">Seret item dari kanan ke kotak yang sesuai di kiri</span><span class="md:hidden">Ketuk item di kanan, lalu ketuk kotak tujuan di kiri</span></p>
        <div class="flex gap-8">
          <div class="flex-1 space-y-3">
            ${q.leftItems.map((left, i) => `
              <div class="flex items-center gap-3">
                <span class="w-8 h-8 bg-blue-100 text-blue-700 rounded-lg flex items-center justify-center font-bold text-sm">${i + 1}</span>
                <span class="flex-1 font-medium text-gray-700">${left}</span>
                <div class="drop-zone w-32 h-11 border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center text-sm text-gray-400 ${savedMatch[left] ? 'matched-item border-solid' : ''}" 
                  data-left="${left}">
                  ${savedMatch[left] || 'Taruh di sini'}
                </div>
              </div>
            `).join('')}
          </div>
          <div class="w-40 space-y-2" id="dragContainer">
            ${shuffledRight.filter(r => !Object.values(savedMatch).includes(r)).map(right => `
              <div class="drag-item bg-gradient-to-r from-indigo-500 to-purple-500 text-white px-4 py-3 rounded-lg text-sm font-medium text-center shadow-md" draggable="true" data-value="${right}">
                ${right}
              </div>
            `).join('')}
          </div>
        </div>
      `;
    }
    
    function renderTrueFalse(q, saved) {
      const savedObj = saved ? JSON.parse(saved) : {};
      return `
        <div class="overflow-x-auto">
          <table class="w-full border-collapse">
            <thead>
              <tr class="bg-gray-100">
                <th class="border border-gray-200 px-4 py-3 text-left font-semibold text-gray-700">Pernyataan</th>
                <th class="border border-gray-200 px-4 py-3 w-24 text-center font-semibold text-gray-700">Benar</th>
                <th class="border border-gray-200 px-4 py-3 w-24 text-center font-semibold text-gray-700">Salah</th>
              </tr>
            </thead>
            <tbody>
              ${q.statements.map((stmt, i) => `
                <tr class="hover:bg-gray-50">
                  <td class="border border-gray-200 px-4 py-3 text-gray-700">${stmt.text}</td>
                  <td class="border border-gray-200 px-4 py-3 text-center">
                    <input type="radio" name="tf_${i}" value="true" ${savedObj[i] === true ? 'checked' : ''} 
                      onchange="saveTrueFalseAnswer(${i}, true)"
                      class="w-5 h-5 text-green-600 border-gray-300 focus:ring-green-500">
                  </td>
                  <td class="border border-gray-200 px-4 py-3 text-center">
                    <input type="radio" name="tf_${i}" value="false" ${savedObj[i] === false ? 'checked' : ''} 
                      onchange="saveTrueFalseAnswer(${i}, false)"
                      class="w-5 h-5 text-red-600 border-gray-300 focus:ring-red-500">
                  </td>
                </tr>
              `).join('')}
            </tbody>
          </table>
        </div>
      `;
    }
    
    function renderAgreeDisagree(q, saved) {
      const savedObj = saved ? JSON.parse(saved) : {};
      
      // Determine header text based on question content
      let header1 = 'Setuju';
      let header2 = 'Tidak Setuju';
      
      if (q.question && q.question.includes('Sesuai')) {
        header1 = 'Sesuai';
        header2 = 'Tidak Sesuai';
      }
      
      return `
        <div class="overflow-x-auto">
          <table class="w-full border-collapse">
            <thead>
              <tr class="bg-gray-100">
                <th class="border border-gray-200 px-4 py-3 text-left font-semibold text-gray-700">Pernyataan</th>
                <th class="border border-gray-200 px-4 py-3 w-32 text-center font-semibold text-gray-700">${header1}</th>
                <th class="border border-gray-200 px-4 py-3 w-32 text-center font-semibold text-gray-700">${header2}</th>
              </tr>
            </thead>
            <tbody>
              ${q.statements.map((stmt, i) => `
                <tr class="hover:bg-gray-50">
                  <td class="border border-gray-200 px-4 py-3 text-gray-700">${stmt.text}</td>
                  <td class="border border-gray-200 px-4 py-3 text-center">
                    <input type="radio" name="ad_${i}" value="true" ${savedObj[i] === true ? 'checked' : ''} 
                      onchange="saveAgreeDisagreeAnswer(${i}, true)"
                      class="w-5 h-5 text-green-600 border-gray-300 focus:ring-green-500">
                  </td>
                  <td class="border border-gray-200 px-4 py-3 text-center">
                    <input type="radio" name="ad_${i}" value="false" ${savedObj[i] === false ? 'checked' : ''} 
                      onchange="saveAgreeDisagreeAnswer(${i}, false)"
                      class="w-5 h-5 text-red-600 border-gray-300 focus:ring-red-500">
                  </td>
                </tr>
              `).join('')}
            </tbody>
          </table>
        </div>
      `;
    }
    
    function setupMatchingDragDrop(qIndex) {
      const dragItems = document.querySelectorAll('.drag-item');
      const dropZones = document.querySelectorAll('.drop-zone');
      
      let selectedDragItem = null;
      
      // Desktop drag & drop events
      dragItems.forEach(item => {
        item.addEventListener('dragstart', (e) => {
          e.dataTransfer.setData('text/plain', item.dataset.value);
          item.classList.add('dragging');
        });
        
        item.addEventListener('dragend', () => {
          item.classList.remove('dragging');
        });
        
        // Touch events untuk mobile (Android/iOS)
        item.addEventListener('touchstart', (e) => {
          e.preventDefault();
          selectedDragItem = item;
          item.style.opacity = '0.5';
          item.style.transform = 'scale(1.05)';
        });
        
        item.addEventListener('touchend', (e) => {
          e.preventDefault();
          item.style.opacity = '1';
          item.style.transform = 'scale(1)';
          
          if (selectedDragItem) {
            const touch = e.changedTouches[0];
            const targetElement = document.elementFromPoint(touch.clientX, touch.clientY);
            const dropZone = targetElement?.closest('.drop-zone');
            
            if (dropZone) {
              handleDrop(dropZone, selectedDragItem.dataset.value);
            }
            selectedDragItem = null;
          }
        });
        
        // Click events untuk alternatif
        item.addEventListener('click', (e) => {
          e.preventDefault();
          if (selectedDragItem && selectedDragItem !== item) {
            selectedDragItem.classList.remove('selected-drag-item');
          }
          selectedDragItem = item;
          item.classList.add('selected-drag-item');
          
          // Visual feedback
          dragItems.forEach(di => {
            if (di !== item) di.classList.remove('selected-drag-item');
          });
        });
      });
      
      function handleDrop(zone, value) {
        // Return old item to drag container if zone is already matched
        if (zone.classList.contains('matched-item')) {
          const oldValue = zone.textContent;
          const dragContainer = document.getElementById('dragContainer');
          const newDragItem = document.createElement('div');
          newDragItem.className = 'drag-item bg-gradient-to-r from-indigo-500 to-purple-500 text-white px-4 py-3 rounded-lg text-sm font-medium text-center shadow-md';
          newDragItem.draggable = true;
          newDragItem.dataset.value = oldValue;
          newDragItem.textContent = oldValue;
          dragContainer.appendChild(newDragItem);
        }
        
        // Place new item in zone
        zone.textContent = value;
        zone.classList.add('matched-item', 'border-solid');
        zone.classList.remove('border-dashed');
        
        // Remove dragged item
        const draggedItem = document.querySelector(`.drag-item[data-value="${value}"]`);
        if (draggedItem) draggedItem.remove();
        
        // Re-setup events
        setupMatchingDragDrop(qIndex);
        saveMatchingAnswer();
      }
      
      dropZones.forEach(zone => {
        // Desktop drag events
        zone.addEventListener('dragover', (e) => {
          e.preventDefault();
          zone.classList.add('drag-over');
        });
        
        zone.addEventListener('dragleave', () => {
          zone.classList.remove('drag-over');
        });
        
        zone.addEventListener('drop', (e) => {
          e.preventDefault();
          zone.classList.remove('drag-over');
          const value = e.dataTransfer.getData('text/plain');
          handleDrop(zone, value);
        });
        
        // Touch events untuk mobile
        zone.addEventListener('touchend', (e) => {
          e.preventDefault();
          if (selectedDragItem) {
            handleDrop(zone, selectedDragItem.dataset.value);
            selectedDragItem = null;
          }
        });
        
        // Click untuk memilih zona tujuan
        zone.addEventListener('click', (e) => {
          e.preventDefault();
          
          // If zone is matched, return item to container
          if (zone.classList.contains('matched-item')) {
            const value = zone.textContent;
            const dragContainer = document.getElementById('dragContainer');
            const newDragItem = document.createElement('div');
            newDragItem.className = 'drag-item bg-gradient-to-r from-indigo-500 to-purple-500 text-white px-4 py-3 rounded-lg text-sm font-medium text-center shadow-md';
            newDragItem.draggable = true;
            newDragItem.dataset.value = value;
            newDragItem.textContent = value;
            dragContainer.appendChild(newDragItem);
            
            zone.textContent = 'Taruh di sini';
            zone.classList.remove('matched-item', 'border-solid');
            zone.classList.add('border-dashed');
            
            setupMatchingDragDrop(qIndex);
            saveMatchingAnswer();
          } 
          // If there's a selected item, place it in this zone
          else if (selectedDragItem) {
            handleDrop(zone, selectedDragItem.dataset.value);
            selectedDragItem = null;
            
            // Remove selection highlight from all items
            dragItems.forEach(di => di.classList.remove('selected-drag-item'));
          }
        });
      });
    }
    
    // =============================================
    // ANSWER SAVING FUNCTIONS
    // =============================================
    
    function saveAnswer(value) {
      const qIndex = questionOrder[currentQuestion];
      answers[qIndex] = value;
      updateProgress();
      renderQuestionNav();
    }
    
    function saveMultipleAnswer() {
      const qIndex = questionOrder[currentQuestion];
      // Hanya ambil checkbox yang benar-benar ada di label dengan class "flex items-center gap-4"
      const checkboxes = document.querySelectorAll('label.flex.items-center.gap-4 input[type="checkbox"]:checked');
      const values = Array.from(checkboxes)
        .map(cb => cb.value)
        .filter(v => v && v !== 'on'); // Filter out empty values and "on"
      answers[qIndex] = JSON.stringify(values);
      updateProgress();
      renderQuestionNav();
    }
    
    function saveMatchingAnswer() {
      const qIndex = questionOrder[currentQuestion];
      const dropZones = document.querySelectorAll('.drop-zone.matched-item');
      const match = {};
      dropZones.forEach(zone => {
        match[zone.dataset.left] = zone.textContent;
      });
      answers[qIndex] = JSON.stringify(match);
      updateProgress();
      renderQuestionNav();
    }
    
    function saveTrueFalseAnswer(index, value) {
      const qIndex = questionOrder[currentQuestion];
      let savedObj = answers[qIndex] ? JSON.parse(answers[qIndex]) : {};
      savedObj[index] = value;
      answers[qIndex] = JSON.stringify(savedObj);
      updateProgress();
      renderQuestionNav();
    }
    
    function saveAgreeDisagreeAnswer(index, value) {
      const qIndex = questionOrder[currentQuestion];
      let savedObj = answers[qIndex] ? JSON.parse(answers[qIndex]) : {};
      savedObj[index] = value;
      answers[qIndex] = JSON.stringify(savedObj);
      updateProgress();
      renderQuestionNav();
    }
    
    // =============================================
    // NAVIGATION AND PROGRESS
    // =============================================
    
    function renderQuestionNav() {
      const navHTML = questionOrder.map((qIndex, i) => {
        const hasAnswer = answers[qIndex] !== undefined && answers[qIndex] !== '' && answers[qIndex] !== '{}' && answers[qIndex] !== '[]';
        const isDoubt = doubts.has(qIndex);
        const isCurrent = i === currentQuestion;
        
        let bgClass = 'bg-gray-200 text-gray-600';
        if (hasAnswer) bgClass = 'bg-green-500 text-white';
        if (isDoubt) bgClass = 'bg-yellow-400 text-white';
        if (isCurrent) bgClass += ' ring-2 ring-blue-600 ring-offset-2';
        
        return `
          <button onclick="goToQuestion(${i})" 
            class="question-num w-10 h-10 rounded-lg font-semibold text-sm ${bgClass} hover:opacity-80">
            ${i + 1}
          </button>
        `;
      }).join('');
      
      // Update both desktop and mobile navigation
      document.getElementById('questionNav').innerHTML = navHTML;
    }
    
    function goToQuestion(index) {
      currentQuestion = index;
      renderQuestion();
      renderQuestionNav();
    }
    
    function prevQuestion() {
      if (currentQuestion > 0) {
        currentQuestion--;
        renderQuestion();
        renderQuestionNav();
      }
    }
    
    function nextQuestion() {
      if (currentQuestion < questions.length - 1) {
        currentQuestion++;
        renderQuestion();
        renderQuestionNav();
      }
    }
    
    function toggleDoubt() {
      const qIndex = questionOrder[currentQuestion];
      if (doubts.has(qIndex)) {
        doubts.delete(qIndex);
      } else {
        doubts.add(qIndex);
      }
      renderQuestion();
      renderQuestionNav();
    }
    
    function updateProgress() {
      const answered = Object.keys(answers).filter(k => {
        const val = answers[k];
        return val !== undefined && val !== '' && val !== '{}' && val !== '[]';
      }).length;
      
      const percentage = questions.length > 0 ? (answered / questions.length) * 100 : 0;
      document.getElementById('progressBar').style.width = `${percentage}%`;
      document.getElementById('progressText').textContent = `${answered}/${questions.length} soal dijawab`;
    }
    
    // =============================================
    // EXAM SUBMISSION
    // =============================================
    
    function showSubmitConfirmation() {
      const answered = Object.keys(answers).filter(k => {
        const val = answers[k];
        return val !== undefined && val !== '' && val !== '{}' && val !== '[]';
      }).length;
      
      document.getElementById('confirmSubmitText').textContent = 
        `Anda telah menjawab ${answered} dari ${questions.length} soal. Yakin ingin mengumpulkan?`;
      
      document.getElementById('confirmSubmitModal').classList.remove('hidden');
      document.getElementById('confirmSubmitModal').classList.add('flex');
    }
    
    function hideSubmitConfirmation() {
      document.getElementById('confirmSubmitModal').classList.add('hidden');
      document.getElementById('confirmSubmitModal').classList.remove('flex');
    }
    
    async function submitExam() {
      if (timerInterval) clearInterval(timerInterval);
      hideSubmitConfirmation();
      
      let correct = 0;
      questions.forEach((q, i) => {
        const userAnswer = answers[i];
        if (checkAnswer(q, userAnswer)) {
          correct++;
        }
      });
      
      const score = questions.length > 0 ? Math.round((correct / questions.length) * 100) : 0;
      const now = new Date();
      
      const result = {
        username: currentUser.username,
        name: currentUser.name,
        kelas: currentUser.kelas,
        answers: JSON.stringify(answers),
        doubts: JSON.stringify([...doubts]),
        score: score,
        total_correct: correct,
        time_remaining: timeRemaining
      };
      
      const success = await saveResultToSheet(result);
      
      if (success) {
        document.getElementById('finalScore').textContent = score;
        document.getElementById('scoreDetail').textContent = `${correct} dari ${questions.length} soal benar`;
        document.getElementById('resultName').textContent = currentUser.name;
        document.getElementById('resultClass').textContent = currentUser.kelas;
        document.getElementById('resultTime').textContent = now.toLocaleString('id-ID');
        
        showPage('resultPage');
        showToast('Jawaban berhasil dikumpulkan!');
      }
    }
    
    function checkAnswer(q, userAnswer) {
      if (userAnswer === undefined || userAnswer === null || userAnswer === '') {
        console.log(`Q${q.id}: Kosong, return false`);
        return false;
      }
      
      switch(q.type) {
        case 'single':
          const userSingle = String(userAnswer).trim();
          const correctSingle = String(q.answer).trim();
          const isMatch = userSingle === correctSingle;
          console.log(`✓ Q${q.id} Single: User="${userSingle}" vs Correct="${correctSingle}" = ${isMatch}`);
          return isMatch;
          
        case 'short':
          const userShort = String(userAnswer).trim().toLowerCase();
          const correctShort = String(q.answer).trim().toLowerCase();
          const isShortMatch = userShort === correctShort;
          console.log(`        Q${q.id} Short: User="${userShort}" vs Correct="${correctShort}" = ${isShortMatch}`);
          return isShortMatch;
          
        case 'multiple':
          console.log(`========== CEK Q${q.id} MULTIPLE ==========`);
          console.log('Raw userAnswer:', userAnswer);
          console.log('Raw q.answer:', q.answer);
          
          try {
            let userArr = [];
            let correctArr = [];
            
            // Parse user answer
            if (typeof userAnswer === 'string') {
              try {
                userArr = JSON.parse(userAnswer);
                console.log('Parsed userAnswer dari JSON:', userArr);
              } catch (e) {
                userArr = [userAnswer];
                console.log('userAnswer bukan JSON, gunakan sebagai array:', userArr);
              }
            } else {
              userArr = Array.isArray(userAnswer) ? userAnswer : [userAnswer];
              console.log('userAnswer adalah:', userArr);
            }
            
            // Parse correct answer
            if (Array.isArray(q.answer)) {
              correctArr = q.answer;
              console.log('q.answer adalah array:', correctArr);
            } else if (typeof q.answer === 'string') {
              try {
                correctArr = JSON.parse(q.answer);
                console.log('Parsed q.answer dari JSON:', correctArr);
              } catch (e) {
                correctArr = [q.answer];
                console.log('q.answer bukan JSON, gunakan sebagai array:', correctArr);
              }
            } else {
              correctArr = [q.answer];
              console.log('q.answer converted to array:', correctArr);
            }
            
            console.log('Sebelum normalize - User:', userArr);
            console.log('Sebelum normalize - Correct:', correctArr);
            
            // Normalize strings (trim dan lowercase)
            userArr = userArr.map(a => String(a).trim());
            correctArr = correctArr.map(a => String(a).trim());
            
            console.log('Setelah trim - User:', userArr);
            console.log('Setelah trim - Correct:', correctArr);
            
            // Sort both arrays for comparison
            const sortedUser = userArr.sort();
            const sortedCorrect = correctArr.sort();
            
            console.log('Sorted User:', sortedUser);
            console.log('Sorted Correct:', sortedCorrect);
            
            const jsonUser = JSON.stringify(sortedUser);
            const jsonCorrect = JSON.stringify(sortedCorrect);
            
            console.log('JSON User:', jsonUser);
            console.log('JSON Correct:', jsonCorrect);
            
            const isMultiMatch = jsonUser === jsonCorrect;
            console.log(`✓ Q${q.id} Multiple Result: ${isMultiMatch ? '   BENAR' : '❌ SALAH'}`);
            console.log('==========================================\n');
            
            return isMultiMatch;
          } catch (e) { 
            console.error(`Q${q.id} Error checking multiple answer:`, e);
            console.log('userAnswer:', userAnswer);
            console.log('q.answer:', q.answer);
            console.log('==========================================\n');
            return false; 
          }
          
        case 'matching':
          try {
            const userMatch = typeof userAnswer === 'string' ? JSON.parse(userAnswer) : userAnswer;
            const correctMatch = typeof q.answer === 'string' ? JSON.parse(q.answer) : q.answer;
            const isMatchingMatch = JSON.stringify(userMatch) === JSON.stringify(correctMatch);
            console.log(`✓ Q${q.id} Matching: Match = ${isMatchingMatch}`);
            return isMatchingMatch;
          } catch (e) { 
            console.error(`Q${q.id} Error checking matching:`, e);
            return false; 
          }
          
        case 'truefalse':
          try {
            const userObj = typeof userAnswer === 'string' ? JSON.parse(userAnswer) : userAnswer;
            const isTFMatch = q.statements.every((stmt, i) => userObj[i] === stmt.answer);
            console.log(`✓ Q${q.id} TrueFalse: Match = ${isTFMatch}`);
            return isTFMatch;
          } catch (e) {
            console.error(`Q${q.id} Error checking truefalse:`, e);
            return false;
          }
          
        case 'agree-disagree':
          try {
            const userObj = typeof userAnswer === 'string' ? JSON.parse(userAnswer) : userAnswer;
            const isADMatch = q.statements.every((stmt, i) => userObj[i] === stmt.answer);
            console.log(`✓ Q${q.id} AgreeDisagree: Match = ${isADMatch}`);
            return isADMatch;
          } catch (e) {
            console.error(`Q${q.id} Error checking agree-disagree:`, e);
            return false;
          }
          
        default:
          console.log(`Q${q.id}: Tipe ${q.type} tidak dikenal`);
          return false;
      }
    }
    
    function logout() {
      if (timerInterval) clearInterval(timerInterval);
      currentUser = null;
      answers = {};
      doubts = new Set();
      document.getElementById('username').value = '';
      document.getElementById('password').value = '';
      showPage('loginPage');
    }
    
    // =============================================
    // ADMIN FUNCTIONS
    // =============================================
    
    function renderAdminData() {
      renderUsersTable();
      renderResultsTable();
      document.getElementById('settingQuestions').value = questions.length;
    }
    
    function renderUsersTable() {
      const users = getUsers();
      const tbody = document.getElementById('usersTableBody');
      const noMessage = document.getElementById('noUsersMessage');
      
      if (users.length === 0) {
        tbody.innerHTML = '';
        noMessage.classList.remove('hidden');
        return;
      }
      
      noMessage.classList.add('hidden');
      tbody.innerHTML = users.map(user => `
        <tr class="hover:bg-gray-50">
          <td class="px-4 md:px-6 py-4">
            <img src="${user.photo || ''}" alt="" class="w-10 h-10 rounded-full object-cover bg-gray-200" loading="lazy"
              onerror="this.src='data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 24 24%22 fill=%22%23999%22><circle cx=%2212%22 cy=%228%22 r=%224%22/><path d=%22M12 14c-4 0-7 2-7 5v1h14v-1c0-3-3-5-7-5z%22/></svg>'">
          </td>
          <td class="px-4 md:px-6 py-4 font-medium text-gray-800 text-sm">${user.username}</td>
          <td class="px-4 md:px-6 py-4 text-gray-600 text-sm">${user.name}</td>
          <td class="px-4 md:px-6 py-4 text-gray-600 text-sm">${user.kelas}</td>
          <td class="px-4 md:px-6 py-4">
            <span class="px-2 py-1 rounded-lg text-xs font-medium ${user.role === 'admin' ? 'bg-purple-100 text-purple-700' : 'bg-blue-100 text-blue-700'}">
              ${user.role || 'siswa'}
            </span>
          </td>
          <td class="px-4 md:px-6 py-4">
            <div class="flex gap-2">
              <button onclick="editUser('${user.__backendId}')" class="text-blue-600 hover:text-blue-800 text-xs md:text-sm font-medium">Edit</button>
              <button onclick="confirmDeleteUser('${user.__backendId}')" class="text-red-600 hover:text-red-800 text-xs md:text-sm font-medium">Hapus</button>
            </div>
          </td>
        </tr>
      `).join('');
    }
    
    function renderResultsTable() {
      const results = getResults();
      const users = getUsers();
      const tbody = document.getElementById('resultsTableBody');
      const noMessage = document.getElementById('noResultsMessage');
      
      document.getElementById('totalParticipants').textContent = users.length;
      document.getElementById('completedCount').textContent = results.length;
      
      if (results.length > 0) {
        const scores = results.map(r => r.score);
        const avgScore = Math.round(scores.reduce((a, b) => a + b, 0) / scores.length);
        const maxScore = Math.max(...scores);
        document.getElementById('averageScore').textContent = avgScore;
        document.getElementById('highestScore').textContent = maxScore;
      } else {
        document.getElementById('averageScore').textContent = '0';
        document.getElementById('highestScore').textContent = '0';
      }
      
      if (results.length === 0) {
        tbody.innerHTML = '';
        noMessage.classList.remove('hidden');
        return;
      }
      
      noMessage.classList.add('hidden');
      tbody.innerHTML = results.map((result, i) => `
        <tr class="hover:bg-gray-50">
          <td class="px-4 md:px-6 py-4 text-gray-600 text-sm">${i + 1}</td>
          <td class="px-4 md:px-6 py-4 font-medium text-gray-800 text-sm">${result.name}</td>
          <td class="px-4 md:px-6 py-4 text-gray-600 text-sm">${result.kelas}</td>
          <td class="px-4 md:px-6 py-4">
            <span class="px-3 py-1 rounded-full text-xs md:text-sm font-bold ${result.score >= 70 ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-700'}">
              ${result.score}
            </span>
          </td>
          <td class="px-4 md:px-6 py-4 text-gray-600 text-sm">${result.total_correct}/${questions.length}</td>
          <td class="px-4 md:px-6 py-4 text-gray-600 text-xs md:text-sm">${new Date(result.timestamp || result.submitted_at).toLocaleString('id-ID')}</td>
        </tr>
      `).join('');
    }
    
    function showUserModal(user = null) {
      const modal = document.getElementById('userModal');
      const title = document.getElementById('userModalTitle');
      
      if (user) {
        title.textContent = 'Edit Pengguna';
        document.getElementById('editUserId').value = user.username;
        document.getElementById('userUsername').value = user.username;
        document.getElementById('userPassword').value = user.password;
        document.getElementById('userFullname').value = user.name;
        document.getElementById('userKelas').value = user.kelas;
        document.getElementById('userPhoto').value = user.photo || '';
      } else {
        title.textContent = 'Tambah Pengguna';
        document.getElementById('editUserId').value = '';
        document.getElementById('userForm').reset();
      }
      
      modal.classList.remove('hidden');
      modal.classList.add('flex');
    }
    
    function hideUserModal() {
      document.getElementById('userModal').classList.add('hidden');
      document.getElementById('userModal').classList.remove('flex');
    }
    
    async function saveUser(e) {
      e.preventDefault();
      
      const editId = document.getElementById('editUserId').value;
      const userData = {
        username: document.getElementById('userUsername').value.trim(),
        password: document.getElementById('userPassword').value.trim(),
        name: document.getElementById('userFullname').value.trim(),
        kelas: document.getElementById('userKelas').value.trim(),
        photo: document.getElementById('userPhoto').value.trim(),
        role: 'siswa'
      };
      
      let success = false;
      if (editId) {
        userData.oldUsername = editId;
        success = await updateUserInSheet(userData);
      } else {
        success = await addUserToSheet(userData);
      }
      
      if (success) {
        hideUserModal();
        renderAdminData();
        showToast(editId ? 'Pengguna berhasil diperbarui!' : 'Pengguna berhasil ditambahkan!');
      }
    }
    
    function editUser(id) {
      const user = allData.find(d => d.__backendId === id);
      if (user) {
        showUserModal(user);
      }
    }
    
    function confirmDeleteUser(id) {
      deleteTargetId = id;
      document.getElementById('deleteConfirmModal').classList.remove('hidden');
      document.getElementById('deleteConfirmModal').classList.add('flex');
    }
    
    function hideDeleteConfirm() {
      document.getElementById('deleteConfirmModal').classList.add('hidden');
      document.getElementById('deleteConfirmModal').classList.remove('flex');
      deleteTargetId = null;
    }
    
    async function deleteUser() {
      if (!deleteTargetId) return;
      
      const user = allData.find(d => d.__backendId === deleteTargetId);
      if (user) {
        const success = await deleteUserFromSheet(user.username);
        if (success) {
          renderAdminData();
          showToast('Pengguna berhasil dihapus!');
        }
      }
      
      hideDeleteConfirm();
    }
    
    function switchAdminTab(tabName) {
      document.querySelectorAll('.admin-tab').forEach(tab => tab.classList.add('hidden'));
      document.querySelectorAll('.admin-nav-btn').forEach(btn => btn.classList.remove('active', 'bg-gray-700'));
      
      document.getElementById(`${tabName}Tab`).classList.remove('hidden');
      document.querySelector(`[data-tab="${tabName}"]`).classList.add('active', 'bg-gray-700');
    }
    
    async function refreshAdminData() {
      showLoading('Memuat ulang data...');
      await fetchAllData();
      renderAdminData();
      hideLoading();
      showToast('Data berhasil diperbarui!');
    }
    
    // =============================================
    // INITIALIZATION
    // =============================================
    
    async function init() {
      // Initialize Element SDK
      if (window.elementSdk) {
        window.elementSdk.init({
          defaultConfig,
          onConfigChange: async (newConfig) => {
            config = { ...defaultConfig, ...newConfig };
            
            const headerTitle = document.getElementById('headerTitle');
            const examTitle = document.getElementById('examTitle');
            
            if (headerTitle) headerTitle.textContent = config.app_title || defaultConfig.app_title;
            if (examTitle) examTitle.textContent = config.app_title || defaultConfig.app_title;
          },
          mapToCapabilities: (cfg) => ({
            recolorables: [],
            borderables: [],
            fontEditable: undefined,
            fontSizeable: undefined
          }),
          mapToEditPanelValues: (cfg) => new Map([
            ['app_title', cfg.app_title || defaultConfig.app_title],
            ['exam_duration', cfg.exam_duration || defaultConfig.exam_duration]
          ])
        });
      }
      
      // Fetch initial data from Google Sheets
      showLoading('Memuat data dari spreadsheet...');
      await fetchAllData();
      hideLoading();
      
      // Event Listeners
      document.getElementById('loginForm').addEventListener('submit', handleStudentLogin);
      document.getElementById('adminLoginForm').addEventListener('submit', handleAdminLogin);
      document.getElementById('adminLoginBtn').addEventListener('click', () => showPage('adminLoginPage'));
      document.getElementById('backToStudentLogin').addEventListener('click', () => showPage('loginPage'));
      document.getElementById('logoutBtn').addEventListener('click', logout);
      document.getElementById('adminLogoutBtn').addEventListener('click', () => showPage('loginPage'));
      document.getElementById('backToLoginBtn').addEventListener('click', () => {
        logout();
        showPage('loginPage');
      });
      
      document.getElementById('prevBtn').addEventListener('click', prevQuestion);
      document.getElementById('nextBtn').addEventListener('click', nextQuestion);
      document.getElementById('doubtBtn').addEventListener('click', toggleDoubt);
      document.getElementById('submitExamBtn').addEventListener('click', showSubmitConfirmation);
      
      document.getElementById('cancelSubmitBtn').addEventListener('click', hideSubmitConfirmation);
      document.getElementById('confirmSubmitBtn').addEventListener('click', submitExam);
      
      document.querySelectorAll('.admin-nav-btn').forEach(btn => {
        btn.addEventListener('click', () => switchAdminTab(btn.dataset.tab));
      });
      
      document.getElementById('addUserBtn').addEventListener('click', () => showUserModal());
      document.getElementById('cancelUserBtn').addEventListener('click', hideUserModal);
      document.getElementById('userForm').addEventListener('submit', saveUser);
      document.getElementById('refreshDataBtn').addEventListener('click', refreshAdminData);
      
      document.getElementById('cancelDeleteBtn').addEventListener('click', hideDeleteConfirm);
      document.getElementById('confirmDeleteBtn').addEventListener('click', deleteUser);
      
      document.getElementById('settingsForm').addEventListener('submit', (e) => {
        e.preventDefault();
        config.app_title = document.getElementById('settingTitle').value;
        config.exam_duration = document.getElementById('settingDuration').value;
        
        if (window.elementSdk) {
          window.elementSdk.setConfig({
            app_title: config.app_title,
            exam_duration: config.exam_duration
          });
        }
        
        showToast('Pengaturan berhasil disimpan!');
      });
      
      document.getElementById('exportResultsBtn').addEventListener('click', () => {
        const results = getResults();
        if (results.length === 0) {
          showToast('Tidak ada data untuk diexport', false);
          return;
        }
        
        let csv = 'No,Nama,Kelas,Skor,Benar,Waktu Selesai\n';
        results.forEach((r, i) => {
          csv += `${i+1},"${r.name}","${r.kelas}",${r.score},${r.total_correct},"${new Date(r.timestamp || r.submitted_at).toLocaleString('id-ID')}"\n`;
        });
        
        const blob = new Blob([csv], { type: 'text/csv' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = 'hasil_ujian.csv';
        a.click();
        URL.revokeObjectURL(url);
        
        showToast('Data berhasil diexport!');
      });
    }
    
    init();
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9c6b3cc7c53503d4',t:'MTc2OTg4Mzc3Ny4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>